{
  "title": "Elasticsearch - Overview",
  "author_name": "Datadog",
  "description": "This dashboard provides a **high-level** overview of your Elasticsearch clusters, so you can track the health, performance, and resource utilization of all your nodes. \n\nFurther reading on Elasticsearch monitoring:\n\n- [Datadog's guide to key Elasticsearch metrics](https://www.datadoghq.com/blog/monitor-elasticsearch-performance-metrics/)\n\n- [How to collect Elasticsearch metrics with native and open source tools](https://www.datadoghq.com/blog/collect-elasticsearch-metrics/)\n\n- [How to monitor Elasticsearch with Datadog](https://www.datadoghq.com/blog/monitor-elasticsearch-datadog/)\n\n- [How to solve 5 Elasticsearch performance and scaling problems](https://www.datadoghq.com/blog/elasticsearch-performance-scaling-problems/)\n\n- [How to resolve unassigned shards in Elasticsearch](https://www.datadoghq.com/blog/elasticsearch-unassigned-shards/)\n\n- [Datadog's Elasticsearch integration docs](https://docs.datadoghq.com/integrations/elastic/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets": [
    {
      "id": 0,
      "definition": {
        "title": "About Elasticsearch",
        "title_align": "center",
        "type": "group",
        "banner_img": "/static/images/integration_dashboard/elasticsearch_hero_2.jpeg",
        "show_title": false,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2600149140365818,
            "definition": {
              "type": "note",
              "content": "**Elasticsearch monitoring guides**\n\n[Datadog guide to key Elasticsearch metrics&nbsp;â†—](https://www.datadoghq.com/blog/monitor-elasticsearch-performance-metrics/)\n\n[How to monitor Elasticsearch with Datadog&nbsp;â†—](https://www.datadoghq.com/blog/monitor-elasticsearch-datadog/)\n\n[Collect metrics with native and open source tools&nbsp;â†—](https://www.datadoghq.com/blog/collect-elasticsearch-metrics/)\n\n[Solve 5 performance and scaling problems&nbsp;â†—](https://www.datadoghq.com/blog/elasticsearch-performance-scaling-problems/)\n\n[Resolve unassigned shards&nbsp;â†—](https://www.datadoghq.com/blog/elasticsearch-unassigned-shards/)",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 4
            }
          },
          {
            "id": 4320908621887210,
            "definition": {
              "type": "note",
              "content": "This is a high-level overview of your Elasticsearch clusters, so you can track health status, search and indexing performance, and resource utilization metrics from all your nodes and be better prepared to address potential issues.\n\n##### [**Datadog Elasticsearch integration docs&nbsp;â†—**](https://docs.datadoghq.com/integrations/elastic/)",
              "background_color": "transparent",
              "font_size": "18",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 7
      }
    },
    {
      "id": 1,
      "definition": {
        "title": "Overview",
        "title_align": "center",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1325288015629784,
            "definition": {
              "title": "Available nodes",
              "title_size": "13",
              "title_align": "center",
              "type": "check_status",
              "check": "elasticsearch.can_connect",
              "grouping": "cluster",
              "group_by": ["host"],
              "tags": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 6564552811205056,
            "definition": {
              "title": "Nodes by cluster status",
              "title_size": "13",
              "title_align": "center",
              "type": "check_status",
              "check": "elasticsearch.cluster_health",
              "grouping": "cluster",
              "group_by": [
                "host"
              ],
              "tags": []
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 7206240267756458,
            "definition": {
              "title": "Elasticsearch Monitor Summary",
              "type": "manage_status",
              "display_format": "countsAndList",
              "color_preference": "text",
              "hide_zero_counts": true,
              "query": "elasticsearch",
              "sort": "status,asc",
              "count": 50,
              "start": 0,
              "summary_type": "monitors",
              "show_priority": false,
              "show_last_triggered": false
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 3,
              "height": 4
            }
          },
          {
            "id": 460411066716264,
            "definition": {
              "type": "note",
              "content": "**ðŸŸ¡ Yellow cluster status**\nAt least one replica shard is unallocated or missing. Search results are still complete. You may lose data if more shards disappear.",
              "background_color": "blue",
              "font_size": "12",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "right",
              "has_padding": false
            },
            "layout": {
              "x": 3,
              "y": 2,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 6798150754581836,
            "definition": {
              "type": "note",
              "content": "**ðŸ›‘ Red cluster status**\nAt least one primary shard is missing. You are missing data and searches will return partial results. You are unable to index into that shard.",
              "background_color": "blue",
              "font_size": "12",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "right",
              "has_padding": false
            },
            "layout": {
              "x": 3,
              "y": 3,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 5589091553996584,
            "definition": {
              "title": "Disk space used",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "palette": "green_on_white",
                      "value": 80
                    },
                    {
                      "comparator": ">",
                      "palette": "yellow_on_white",
                      "value": 80
                    },
                    {
                      "comparator": ">",
                      "palette": "red_on_white",
                      "value": 90
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:elasticsearch.fs.total.available_in_bytes{$cluster_name,$node_name,*,*,$url,$host}",
                      "aggregator": "avg"
                    },
                    {
                      "data_source": "metrics",
                      "name": "query2",
                      "query": "sum:elasticsearch.fs.total.total_in_bytes{$cluster_name,$node_name,*,*,$url,$host}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "(1 - (query1 / query2)) * 100"
                    }
                  ]
                }
              ],
              "custom_unit": "%",
              "precision": 1
            },
            "layout": {
              "x": 3,
              "y": 4,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 7893840749494752,
            "definition": {
              "title": "Storage size (total)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:elasticsearch.store.size{$cluster_name,$node_name,*,*,$url,$host}.rollup(avg)",
                      "aggregator": "last"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 5,
              "width": 3,
              "height": 1
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 7
      }
    },
    {
      "id": 2,
      "definition": {
        "title": "Cluster Performance",
        "title_align": "center",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 14,
            "definition": {
              "title": "Number of documents in cluster",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Documents in the cluster"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:elasticsearch.docs.count{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 18,
            "definition": {
              "title": "Indexing latency (average)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Index Time"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.time{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 20,
            "definition": {
              "title": "Pending tasks (total)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Pending tasks"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:elasticsearch.pending_tasks_total{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 19,
            "definition": {
              "title": "Query and fetch latency (average)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "(query1 / query2)",
                      "alias": "Time per query"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.search.query.time{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:elasticsearch.search.query.total{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "(query1 / query2)",
                      "alias": "Time per search fetch"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.search.fetch.time{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:elasticsearch.search.fetch.total{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 21,
            "definition": {
              "type": "note",
              "content": "Fetch latency should be much lower than query latency. A consistent increase in fetch latency can indicate a problem with slow disks, document enrichment[1], or requesting too many results.\n\n*Tip: set an alert if the query latency exceeds a threshold. If it fires, look for potential resource bottlenecks and investigate whether you need to optimize your queries.*\n\nFootnote: [1]Highlighting relevant text in search results, etc",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 8,
              "width": 5,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 5,
        "height": 11
      }
    },
    {
      "id": 3,
      "definition": {
        "title": "Nodes with highest activity ",
        "title_align": "center",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 23,
            "definition": {
              "title": "Nodes with most and least queries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "max",
                "avg"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query1), 5, 'sum', 'desc')",
                      "alias": "Top changing queries"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.search.query.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query3), 5, 'mean', 'asc')",
                      "alias": "Bottom changing queries"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.search.query.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 5,
              "height": 5
            }
          },
          {
            "id": 24,
            "definition": {
              "title": "Top indexing activity - Nodes",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "diff(query1)",
                      "limit": {
                        "count": 25,
                        "order": "desc"
                      }
                    }
                  ],
                  "conditional_formats": [
                    {
                      "custom_bg_color": "#f9e0ff",
                      "comparator": ">",
                      "palette": "custom_bg",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "sum"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 5,
              "y": 0,
              "width": 2,
              "height": 5
            }
          },
          {
            "id": 25,
            "definition": {
              "title": "Nodes with most indexing activity",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": [
                "max",
                "avg"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query1), 5, 'sum', 'desc')"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query1), 5, 'sum', 'asc')"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 5,
              "width": 5,
              "height": 5
            }
          },
          {
            "id": 22,
            "definition": {
              "title": "Top queries - Nodes",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "diff(query1)",
                      "limit": {
                        "count": 25,
                        "order": "desc"
                      }
                    }
                  ],
                  "conditional_formats": [
                    {
                      "custom_bg_color": "#f9e0ff",
                      "comparator": ">",
                      "palette": "custom_bg",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:elasticsearch.search.query.total{$cluster_name,$url,$node_name,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "sum"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 5,
              "y": 5,
              "width": 2,
              "height": 5
            }
          }
        ]
      },
      "layout": {
        "x": 5,
        "y": 0,
        "width": 7,
        "height": 11
      }
    },
    {
      "id": 7,
      "definition": {
        "title": "Logs",
        "title_align": "left",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 4462399890289648,
            "definition": {
              "type": "note",
              "content": "When investigating logs, you can refer to the timeseries data to see the ratio of a certain log status to other expected statuses. In situations where you notice an increase in the ratio of error logs, you can refer to the log stream set up to filter erroneous RabbitMQ logs for your perusal. Please note that you will have to enable logs to see the widgets in this group populate. ",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "center",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "bottom",
              "has_padding": false
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 1
            }
          },
          {
            "id": 8558161295102536,
            "definition": {
              "title": "Count per Log Status",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "a"
                    }
                  ],
                  "queries": [
                    {
                      "data_source": "logs",
                      "name": "a",
                      "indexes": [
                        "*"
                      ],
                      "compute": {
                        "aggregation": "count"
                      },
                      "group_by": [
                        {
                          "facet": "status",
                          "limit": 50,
                          "sort": {
                            "order": "desc",
                            "aggregation": "count"
                          },
                          "should_exclude_missing": true
                        }
                      ],
                      "search": {
                        "query": "source:elasticsearch"
                      },
                      "storage": "online_archives"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "semantic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "bars"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 1,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 540207495208726,
            "definition": {
              "title": "Errors",
              "title_size": "16",
              "requests": [
                {
                  "response_format": "event_list",
                  "query": {
                    "data_source": "logs_stream",
                    "query_string": "source:elasticsearch $cluster_name $url $node_name $host status:(error OR critical)",
                    "indexes": [],
                    "storage": "hot",
                    "sort": {
                      "order": "desc",
                      "column": "timestamp"
                    }
                  },
                  "columns": [
                    {
                      "field": "status_line",
                      "width": "auto"
                    },
                    {
                      "field": "timestamp",
                      "width": "auto"
                    },
                    {
                      "field": "host",
                      "width": "auto"
                    },
                    {
                      "field": "cluster_name",
                      "width": "auto"
                    },
                    {
                      "field": "service",
                      "width": "auto"
                    },
                    {
                      "field": "node_name",
                      "width": "auto"
                    },
                    {
                      "field": "url",
                      "width": "auto"
                    },
                    {
                      "field": "content",
                      "width": "auto"
                    }
                  ]
                }
              ],
              "type": "list_stream"
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 12,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 18,
        "width": 12,
        "height": 9
      }
    },
    {
      "id": 4,
      "definition": {
        "title": "Network Summary",
        "title_align": "center",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 28,
            "definition": {
              "type": "note",
              "content": "As shards are replicated or rebalanced across nodes it's important to monitor the network. Elasticsearch provides transport metrics about cluster communication. You can also look at the rate of bytes sent and received to understand traffic on your network.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "center",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "bottom",
              "has_padding": false
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 1
            }
          },
          {
            "id": 26,
            "definition": {
              "title": "Bytes received and sent (total)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query3)",
                      "alias": "Bytes received"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.transport.rx_count{$cluster_name,$node_name,$url,$host}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "-per_second(query1)",
                      "alias": "Bytes sent"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.transport.tx_count{$cluster_name,$node_name,$url,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 1,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 27,
            "definition": {
              "title": "Bytes received and sent (by host)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "max",
                "min"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query1)",
                      "alias": "Bytes received"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.transport.rx_count{$cluster_name,$node_name,$url,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "-per_second(query1)",
                      "alias": "Bytes sent"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.transport.tx_count{$cluster_name,$node_name,$url,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 6,
              "y": 1,
              "width": 6,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 27,
        "width": 12,
        "height": 5,
        "is_column_break": true
      }
    },
    {
      "id": 6,
      "definition": {
        "title": "Shards",
        "title_align": "left",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5557246177336346,
            "definition": {
              "type": "note",
              "content": "Causes for an unassigned shard value that is `>  0`\n\n**1. Purposeful delay of shard allocation**\n\n> If this is the case, a log will appear with this message `delaying allocation for [54] unassigned shards, next check in [1m]`\n\n**2. Too many shards for not enough nodes**\n\n> Make sure that every index in your cluster is initialized with fewer replicas per primary shard than the number of nodes in your cluster.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 4097357055277386,
            "definition": {
              "title": "Active shards (total and primary)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Active shards"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.active_shards{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Active primary shards"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.active_primary_shards{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 361774670041768,
            "definition": {
              "title": "Active shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "max:elasticsearch.active_shards{$cluster_name,$url,$node_name,$host}",
                      "aggregator": "max"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_green",
                      "value": 0
                    },
                    {
                      "comparator": "<=",
                      "palette": "black_on_light_red",
                      "value": 0
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 6287562170317006,
            "definition": {
              "title": "Unassigned shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "black_on_light_red",
                      "value": 0
                    },
                    {
                      "comparator": "<=",
                      "palette": "black_on_light_green",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "max:elasticsearch.unassigned_shards{$cluster_name,$url,$node_name,$host}",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 2,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 8982651895803684,
            "definition": {
              "title": "Shards initializing, relocating, unassigned",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Initializing shards"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.initializing_shards{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Unassigned shards"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.unassigned_shards{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Relocating shards"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.relocating_shards{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 6,
              "y": 2,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 8940003715104904,
            "definition": {
              "title": "Initializing shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "black_on_light_red",
                      "value": 0
                    },
                    {
                      "comparator": "<=",
                      "palette": "black_on_light_green",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "max:elasticsearch.initializing_shards{$cluster_name,$url,$node_name,$host}",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": false,
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 3,
              "height": 1
            }
          },
          {
            "id": 8680461317763444,
            "definition": {
              "title": "Relocating shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "black_on_light_red",
                      "value": 0
                    },
                    {
                      "comparator": "<=",
                      "palette": "black_on_light_green",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "max:elasticsearch.relocating_shards{$cluster_name,$url,$node_name,$host}",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 3,
              "width": 3,
              "height": 1
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 32,
        "width": 12,
        "height": 5
      }
    },
    {
      "id": 5423041108733662,
      "definition": {
        "title": "Index Metrics",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8389275282446324,
            "definition": {
              "type": "note",
              "content": "The volume and max time of search queries per index indicates which indexes are most frequently searched and therefore are strong candidates for optimization. Indexing pressure over time shows memory consumption based on indexing load relative to pre-set limits. ",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "center",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "bottom",
              "has_padding": false
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 1
            }
          },
          {
            "id": 699254885530152,
            "definition": {
              "title": "Max Times for Search Queries per Index",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:elasticsearch.index.search.query.time{*} by {index_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": {
                "type": "table"
              }
            },
            "layout": {
              "x": 0,
              "y": 1,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 5366192298105498,
            "definition": {
              "title": "Search Queries per Index",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:elasticsearch.index.search.query.total{*} by {index_name}",
                      "aggregator": "avg"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": {
                "type": "table"
              }
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 12,
              "height": 3
            }
          },
          {
            "id": 4987064191740762,
            "definition": {
              "title": "Indexing Pressure (Memory)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Current",
                      "formula": "query1"
                    },
                    {
                      "alias": "Total",
                      "formula": "query2"
                    },
                    {
                      "alias": "Limit",
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:elasticsearch.indexing_pressure.memory.current.all_in_bytes{$index_name}"
                    },
                    {
                      "name": "query2",
                      "data_source": "metrics",
                      "query": "avg:elasticsearch.indexing_pressure.memory.total.all_in_bytes{$index_name}"
                    },
                    {
                      "name": "query3",
                      "data_source": "metrics",
                      "query": "avg:elasticsearch.indexing_pressure.memory.limit_in_bytes{$index_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 7,
              "width": 12,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 37,
        "width": 12,
        "height": 11
      }
    },
    {
      "id": 5,
      "definition": {
        "title": "HTTP Traffic",
        "title_align": "center",
        "background_color": "vivid_yellow",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 29,
            "definition": {
              "title": "Total number of unsuccessful GETs",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Get requests where the document was missing"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.get.missing.total{$cluster_name,$node_name,$url,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 30,
            "definition": {
              "type": "note",
              "content": "A `GET` request retrieves a document by its ID and is more straightforward than a normal search request. \n\nAn unsuccessful get-by-ID request means that the document ID was **not found**.\n\n`GET` requests are *typically* not problematic, but you may still want to know when they are unsuccessful.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 31,
            "definition": {
              "title": "Rate of opened HTTP connections",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query1)",
                      "alias": "Opened HTTP connections per second"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.http.total_opened{$cluster_name,$url,$node_name,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 32,
            "definition": {
              "type": "note",
              "content": "If the number of opened HTTP connections is constantly increasing, your HTTP clients may not be properly establishing **persistent** connections.\n\nRequests sent in any language (excluding Java) will communicate with Elasticsearch using a RESTful API over HTTP.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 6,
              "y": 2,
              "width": 6,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 48,
        "width": 12,
        "height": 5
      }
    }
  ],
  "template_variables": [
    {
      "name": "cluster_name",
      "prefix": "cluster_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "node_name",
      "prefix": "node_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "url",
      "prefix": "url",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "host",
      "prefix": "host",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "index_name",
      "prefix": "index_name",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "is_read_only": true,
  "notify_list": [],
  "reflow_type": "fixed"
}
