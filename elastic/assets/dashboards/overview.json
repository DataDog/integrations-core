{
  "title": "Elasticsearch - Overview",
  "author_name": "Datadog",
  "description": " This dashboard provides a **high-level** overview of your Elasticsearch clusters, so you can track the health, performance, and resource utilization of all your nodes. \n\nFurther reading on Elasticsearch monitoring:\n\n- [Datadog's guide to key Elasticsearch metrics](https://www.datadoghq.com/blog/monitor-elasticsearch-performance-metrics/)\n\n- [How to collect Elasticsearch metrics with native and open source tools](https://www.datadoghq.com/blog/collect-elasticsearch-metrics/)\n\n- [How to monitor Elasticsearch with Datadog](https://www.datadoghq.com/blog/monitor-elasticsearch-datadog/)\n\n- [How to solve 5 Elasticsearch performance and scaling problems](https://www.datadoghq.com/blog/elasticsearch-performance-scaling-problems/)\n\n- [How to resolve unassigned shards in Elasticsearch](https://www.datadoghq.com/blog/elasticsearch-unassigned-shards/)\n\n- [Datadog's Elasticsearch integration docs](https://docs.datadoghq.com/integrations/elastic/)\n\nClone this template dashboard to make changes and add your own graph widgets. (cloned) (cloned) (cloned)",
  "widgets": [
    {
      "id": 0,
      "definition": {
        "title": "Overview",
        "title_align": "center",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8,
            "definition": {
              "type": "note",
              "content": " This dashboard provides a **high-level** overview of your Elasticsearch clusters, so you can track the health, performance, and resource utilization of all your nodes. \n\nFurther reading on Elasticsearch monitoring:\n\n- [Datadog's guide to key Elasticsearch metrics](https://www.datadoghq.com/blog/monitor-elasticsearch-performance-metrics/)\n\n- [How to collect Elasticsearch metrics with native and open source tools](https://www.datadoghq.com/blog/collect-elasticsearch-metrics/)\n\n- [How to monitor Elasticsearch with Datadog](https://www.datadoghq.com/blog/monitor-elasticsearch-datadog/)\n\n- [How to solve 5 Elasticsearch performance and scaling problems](https://www.datadoghq.com/blog/elasticsearch-performance-scaling-problems/)\n\n- [How to resolve unassigned shards in Elasticsearch](https://www.datadoghq.com/blog/elasticsearch-unassigned-shards/)\n\n- [Datadog's Elasticsearch integration docs](https://docs.datadoghq.com/integrations/elastic/)",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 3 }
          },
          {
            "id": 9,
            "definition": {
              "title": "Logs",
              "title_size": "16",
              "type": "log_stream",
              "indexes": [],
              "query": "source:elasticsearch $cluster_name",
              "sort": { "column": "time", "order": "desc" },
              "columns": ["core_host", "core_service"],
              "show_date_column": true,
              "show_message_column": true,
              "message_display": "expanded-lg"
            },
            "layout": { "x": 6, "y": 0, "width": 6, "height": 5 }
          },
          {
            "id": 10,
            "definition": {
              "title": "Elasticsearch hosts",
              "title_size": "16",
              "title_align": "left",
              "type": "hostmap",
              "requests": {
                "fill": {
                  "q": "sum:elasticsearch.fs.total.total_in_bytes{*} by {host}"
                }
              },
              "node_type": "host",
              "no_metric_hosts": false,
              "no_group_hosts": false,
              "group": [],
              "style": { "palette": "Plasma", "palette_flip": false }
            },
            "layout": { "x": 0, "y": 3, "width": 6, "height": 2 }
          }
        ]
      }
    },
    {
      "id": 1,
      "definition": {
        "title": "Disk utilization",
        "title_align": "left",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 11,
            "definition": {
              "title": "Disk space used",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "(1-(sum:elasticsearch.fs.total.available_in_bytes{$cluster_name} by {host}/sum:elasticsearch.fs.total.total_in_bytes{$cluster_name} by {host}))*100",
                  "aggregator": "avg",
                  "conditional_formats": [
                    {
                      "comparator": "<",
                      "palette": "white_on_green",
                      "value": 80
                    },
                    {
                      "comparator": ">",
                      "palette": "yellow_on_white",
                      "value": 80
                    },
                    {
                      "comparator": ">",
                      "palette": "white_on_red",
                      "value": 90
                    }
                  ]
                }
              ],
              "custom_unit": "%",
              "precision": 1
            },
            "layout": { "x": 0, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 12,
            "definition": {
              "title": "Storage size (total)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "sum:elasticsearch.store.size{$cluster_name}",
                  "aggregator": "last"
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": { "x": 2, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 13,
            "definition": {
              "title": "File descriptors (average)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "avg:elasticsearch.process.open_fd{$cluster_name,$node_name}",
                  "aggregator": "avg"
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": { "x": 4, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 14,
            "definition": {
              "title": "Number of documents in cluster",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Documents in the cluster" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.docs.count{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "x": 0, "y": 0, "width": 6, "height": 5 }
    },
    {
      "id": 2,
      "definition": {
        "title": "Node status",
        "title_align": "left",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 15,
            "definition": {
              "title": "Nodes by cluster status",
              "title_size": "13",
              "title_align": "center",
              "type": "check_status",
              "check": "elasticsearch.cluster_health",
              "grouping": "cluster",
              "group_by": [],
              "tags": []
            },
            "layout": { "x": 0, "y": 0, "width": 3, "height": 2 }
          },
          {
            "id": 16,
            "definition": {
              "type": "note",
              "content": "A `yellow` cluster status means that at least one replica shard is **unallocated or missing**. Search results will still be complete, but you may **lose** data if more shards disappear.\n\nA `red` cluster status indicates that at least one `primary` shard is missing. This means you are **missing data** and searches will return partial results. You will also be unable to index into that shard. Consider creating a `monitor` for a `yellow` status that lasts longer than 5 minutes or a `red` status that lasts longer than 1 minute.\n",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "25%",
              "tick_edge": "right",
              "has_padding": true
            },
            "layout": { "x": 3, "y": 0, "width": 3, "height": 4 }
          },
          {
            "id": 17,
            "definition": {
              "title": "Available nodes",
              "title_size": "13",
              "title_align": "center",
              "type": "check_status",
              "check": "elasticsearch.can_connect",
              "grouping": "cluster",
              "group_by": [],
              "tags": []
            },
            "layout": { "x": 0, "y": 2, "width": 3, "height": 2 }
          }
        ]
      },
      "layout": { "x": 6, "y": 0, "width": 6, "height": 5 }
    },
    {
      "id": 3,
      "definition": {
        "title": "Cluster Performance",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_yellow",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 18,
            "definition": {
              "title": "Indexing latency (average)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "on_right_yaxis": false,
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.time{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 19,
            "definition": {
              "title": "Query and fetch latency (average)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "(query1 / query2)",
                      "alias": "Time per query"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.search.query.time{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:elasticsearch.search.query.total{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "(query1 / query2)",
                      "alias": "Time per search fetch"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.search.fetch.time{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:elasticsearch.search.fetch.total{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 6, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 20,
            "definition": {
              "title": "Pending tasks (total)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Pending tasks" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.pending_tasks_total{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 2 }
          },
          {
            "id": 21,
            "definition": {
              "type": "note",
              "content": "Set an **alert** if the query latency exceeds a threshold. If it fires, look for potential resource bottlenecks and investigate whether you need to optimize your queries.\n\n`Fetch latency` should typically be much lower than `query latency`. A consistent increase in fetch latency could indicate a problem with **slow disks**, document enrichment (highlighting relevant text in search results, etc.), or requesting too many results.\n\n",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": true
            },
            "layout": { "x": 6, "y": 2, "width": 6, "height": 2 }
          }
        ]
      }
    },
    {
      "id": 4,
      "definition": {
        "title": "Nodes with highest activity ",
        "title_align": "center",
        "type": "group",
        "background_color": "yellow",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 22,
            "definition": {
              "title": "Nodes with most queries",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "q": "top(diff(avg:elasticsearch.search.query.total{$cluster_name} by {host}), 25, 'sum', 'desc')"
                }
              ]
            },
            "layout": { "x": 0, "y": 0, "width": 4, "height": 3 }
          },
          {
            "id": 23,
            "definition": {
              "title": "Nodes with most and least queries",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": ["max", "avg"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query1), 5, 'sum', 'desc')",
                      "alias": "Top changing queries"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.search.query.total{$cluster_name} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "top(diff(query3), 5, 'mean', 'asc')",
                      "alias": "Bottom changing queries"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.search.query.total{$cluster_name} by {host}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 4, "y": 0, "width": 8, "height": 3 }
          },
          {
            "id": 24,
            "definition": {
              "title": "Nodes with most indexing activity",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "q": "top(diff(avg:elasticsearch.indexing.index.total{$cluster_name} by {host}), 25, 'sum', 'desc')"
                }
              ]
            },
            "layout": { "x": 0, "y": 3, "width": 4, "height": 3 }
          },
          {
            "id": 25,
            "definition": {
              "title": "Nodes with most indexing activity",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "vertical",
              "legend_columns": ["max", "avg"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "formula": "top(diff(query1), 5, 'sum', 'desc')" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.total{$cluster_name} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    { "formula": "top(diff(query1), 5, 'sum', 'asc')" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.indexing.index.total{$cluster_name} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 4, "y": 3, "width": 8, "height": 3 }
          }
        ]
      }
    },
    {
      "id": 5,
      "definition": {
        "title": "Network Summary",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_purple",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 26,
            "definition": {
              "title": "Bytes received and sent (total)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query3)",
                      "alias": "Bytes received"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.transport.rx_count{$cluster_name,$node_name}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                },
                {
                  "formulas": [
                    { "formula": "-per_second(query1)", "alias": "Bytes sent" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.transport.tx_count{$cluster_name,$node_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 3 }
          },
          {
            "id": 27,
            "definition": {
              "title": "Bytes received and sent (by host)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "vertical",
              "legend_columns": ["max", "min"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query1)",
                      "alias": "Bytes received"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.transport.rx_count{$cluster_name,$node_name} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    { "formula": "-per_second(query1)", "alias": "Bytes sent" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:elasticsearch.transport.tx_count{$cluster_name,$node_name} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 6, "y": 0, "width": 6, "height": 5 }
          },
          {
            "id": 28,
            "definition": {
              "type": "note",
              "content": "Node communication is an important part of a balanced cluster.\n\nYou'll want to monitor the network to ensure it's healthy and keeping up with the demands on your cluster *(e.g. as shards are replicated or rebalanced across nodes)*.\n\n`Elasticsearch` provides transport metrics about cluster communication, but you can also look at the rate of bytes sent and received to understand **traffic** on your network.",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 0, "y": 3, "width": 6, "height": 2 }
          }
        ]
      },
      "layout": { "is_column_break": true }
    },
    {
      "id": 6,
      "definition": {
        "title": "HTTP Traffic",
        "title_align": "center",
        "type": "group",
        "background_color": "purple",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 29,
            "definition": {
              "title": "Total number of unsuccessful GETs",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Get requests where the document was missing"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.get.missing.total{$cluster_name,$node_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 30,
            "definition": {
              "type": "note",
              "content": "A `GET` request retrieves a document by its ID and is more straightforward than a normal search request. \n\nAn unsuccessful get-by-ID request means that the document ID was **not found**.\n\n`GET` requests are *typically* not problematic, but you may still want to know when they are unsuccessful.",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 6, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 31,
            "definition": {
              "title": "Rate of opened HTTP connections",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "per_second(query1)",
                      "alias": "Opened HTTP connections per second"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:elasticsearch.http.total_opened{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 2 }
          },
          {
            "id": 32,
            "definition": {
              "type": "note",
              "content": "Requests sent in any language (excluding `Java`) will communicate with Elasticsearch using RESTful API over HTTP.\n\nIf the number of opened HTTP connections is constantly `increasing`, your HTTP clients may not be properly establishing **persistent** connections.",
              "background_color": "white",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 6, "y": 2, "width": 6, "height": 2 }
          }
        ]
      }
    },
    {
      "id": 7,
      "definition": {
        "title": "Shards",
        "title_align": "center",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 33,
            "definition": {
              "title": "Active shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "max:elasticsearch.active_shards{$cluster_name}",
                  "aggregator": "max"
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": { "x": 0, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 34,
            "definition": {
              "title": "Unassigned shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "max:elasticsearch.unassigned_shards{$cluster_name}",
                  "aggregator": "max",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_red",
                      "value": 0
                    },
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 0
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": { "x": 2, "y": 0, "width": 2, "height": 2 }
          },
          {
            "id": 35,
            "definition": {
              "title": "Initializing shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "max:elasticsearch.initializing_shards{$cluster_name}",
                  "aggregator": "max",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_red",
                      "value": 0
                    },
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 0
                    }
                  ]
                }
              ],
              "autoscale": false,
              "custom_unit": "",
              "precision": 0
            },
            "layout": { "x": 4, "y": 0, "width": 2, "height": 1 }
          },
          {
            "id": 36,
            "definition": {
              "type": "note",
              "content": "An `unassigned shard` value that is `<>  0` could be caused by:\n- **Purposeful delay** of shard allocation. If this is the case, a log with the message `delaying allocation for [54] unassigned shards, next check in [1m]` should appear.\n- **Too many shards** for not enough **nodes**. Make sure that every index in your cluster is initialised with **fewer** replicas per primary shard than the number of nodes in your cluster.\n",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": { "x": 6, "y": 0, "width": 6, "height": 2 }
          },
          {
            "id": 37,
            "definition": {
              "title": "Relocating shards",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "max:elasticsearch.relocating_shards{$cluster_name}",
                  "aggregator": "max",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_red",
                      "value": 0
                    },
                    {
                      "comparator": "<=",
                      "palette": "white_on_green",
                      "value": 0
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": { "x": 4, "y": 1, "width": 2, "height": 1 }
          },
          {
            "id": 38,
            "definition": {
              "title": "Active shards (total and primary)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Active shards" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.active_shards{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Active primary shards" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.active_primary_shards{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 0, "y": 2, "width": 6, "height": 3 }
          },
          {
            "id": 39,
            "definition": {
              "title": "Shards initializing, relocating, unassigned",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Initializing shards" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.initializing_shards{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Unassigned shards" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.unassigned_shards{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    { "formula": "query1", "alias": "Relocating shards" }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:elasticsearch.relocating_shards{$cluster_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": { "x": 6, "y": 2, "width": 6, "height": 3 }
          }
        ]
      }
    }
  ],
  "template_variables": [
    { "name": "cluster_name", "default": "*", "prefix": "cluster_name" },
    { "name": "node_name", "default": "*", "prefix": "node_name" }
  ],
  "layout_type": "ordered",
  "is_read_only": true,
  "notify_list": [],
  "reflow_type": "fixed",
  "id": "ysp-jfz-ce6"
}
