{
    "version": 2,
    "created_at": "2025-06-30",
    "last_updated_at": "2025-06-30",
    "title": "Kuma No Leader Detected",
    "tags": [
        "integration:kuma"
    ],
    "description": "Each Kuma zone must have exactly one leader instance for proper operation. This monitor alerts when no leader is detected, which prevents policy updates and proper control plane operation.",
    "definition": {
        "message": "{{#is_alert}}\n\nNo Kuma leader detected in zone {{zone.name}}.\n\nLeader count: {{value}}\n\nWithout a leader, the control plane cannot:\n- Process policy updates\n- Manage dataplane configurations\n- Coordinate cluster operations\n\nPossible causes:\n- All control plane instances are down\n- Leader election process is failing\n- Network partition preventing election\n- Configuration issues with leader election\n\nCheck control plane logs and ensure at least one healthy instance is running.\n\n{{/is_alert}}",
        "name": "[Kuma] No Leader Detected",
        "options": {
            "thresholds": {
                "critical": 0.5
            },
            "notify_audit": false,
            "include_tags": true,
            "new_group_delay": 300,
            "silenced": {},
            "notify_no_data": true,
            "no_data_timeframe": 20,
            "renotify_interval": 300,
            "require_full_window": true,
            "evaluation_delay": 60
        },
        "priority": 1,
        "query": "min(last_10m):sum:kuma.leader{*} by {zone,cluster_name} < 0.5",
        "tags": [
            "integration:kuma"
        ],
        "type": "query alert"
    }
} 