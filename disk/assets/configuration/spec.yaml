name: Disk
files:
  - name: disk.yaml
    options:
      - template: init_config
      - template: instances
        options:
          - name: use_mount
            required: true
            description: Instruct the check to collect using mount points instead of volumes.
            value:
              example: false
              type: boolean
          - name: all_partitions
            description: |
              Instruct the check to collect from partitions even without device names.
              Setting `use_mount` to true is strongly recommended in this case.
            value:
              example: false
              type: boolean
          - template: instances/tags
          - name: file_system_whitelist
            description: |
              Instruct the check to only collect from matching file systems.
             
              Character casing is ignored. For convenience, the regular expressions
              start matching from the beginning and therefore to match anywhere you
              must prepend `.*`. For exact matches append `$`.
            value:
                example:
                  - ext[34]$
                  - ntfs$
                type: array
                items:
                  type: string
          - name: file_system_blacklist
            description: |
              Instruct the check to not collect from matching file systems.

              Character casing is ignored. For convenience, the regular expressions
              start matching from the beginning and therefore to match anywhere you
              must prepend `.*`. For exact matches append `$`.

              When conflicts arise, this will override `file_system_whitelist`.
            value:
              example:
                - tmpfs$
                - rootfs$
                - autofs$
              type: array
              items:
                type: string
          - name: device_whitelist
            description: |
                Instruct the check to only collect from matching devices.

                Character casing is ignored on Windows. For convenience, the regular
                expressions start matching from the beginning and therefore to match
                anywhere you must prepend `.*`. For exact matches append `$`.
            value:
              example:
                - '/dev/sda[1-3]'
                - 'C:'
              type: array
              items:
                type: string
          - name: device_blacklist
            description: |
              Instruct the check to not collect from matching devices.

              Character casing is ignored on Windows. For convenience, the regular
              expressions start matching from the beginning and therefore to match
              anywhere you must prepend `.*`. For exact matches append `$`.

              When conflicts arise, this will override `device_whitelist`.
            value:
              example:
               - /dev/sde
               - '[FJ]:'
              type: array
              items:
                type: string
          - name: mount_point_whitelist
            description: |
               Instruct the check to only collect from matching mount points.

               Character casing is ignored on Windows. For convenience, the regular
               expressions start matching from the beginning and therefore to match
               anywhere you must prepend `.*`. For exact matches append `$`.
            value:
              example:
                - '/dev/sda[1-3]'
                - 'C:'
              type: array
              items:
                type: string
          - name: mount_point_blacklist
            description: |
              Instruct the check to not collect from matching mount points.

              Character casing is ignored on Windows. For convenience, the regular
              expressions start matching from the beginning and therefore to match
              anywhere you must prepend `.*`. For exact matches append `$`.
            value:
              example:
               - /proc/sys/fs/binfmt_misc
               - /dev/sde
               - '[FJ]:'
              type: array
              items:
                type: string
          - name: service_check_rw
            description: |
              Instruct the check to notify based on partition state.

              read-write -> OK
              read-only  -> CRITICAL
              other      -> UNKNOWN
            value:
              example: false
              type: boolean
          - name: tag_by_filesystem
            description: Instruct the check to tag all disks with their file system e.g. filesystem:ntfs.
            value:
              example: false
              type: boolean
          - name: tag_by_label
            description: |
              Instruct the check to tag all the metrics with disk label if there is one.
              Works on Linux only.
            value:
              example: true
              type: boolean
          - name: blkid_cache_file
            description: |
              Instruct the check to read the labels from the blkid cache file instead of `blkid` executable.
              This parameter is used only if `tag_by_label` is true.
              Works on Linux only.
            value:
              example: /run/blkid/blkid.tab
              default: null
              type: string
          - name: device_tag_re
            description: |
              Instruct the check to apply additional tags to matching
              devices (or mount points if `use_mount` is true).

              Character casing is ignored on Windows. Multiple comma-separated
              tags are supported. You must properly quote the string if the
              pattern contains special characters e.g. colons.
            value:
              example:
                /san/.*: device_type:san
                /dev/sda3: role:db,disk_size:large
                "c:": volume:boot
              type: object
          - name: min_disk_size
            description: Exclude devices with a total disk size less than a minimum value (in MiB)
            value:
              example: 0
              type: number
