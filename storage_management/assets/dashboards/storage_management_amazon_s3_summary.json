{"title":"Storage Management ‚Äî Summary","description":"A compact overview of your Amazon S3 storage footprint, estimated costs, and top optimization opportunities. Powered by the AWS S3 integration and enhanced by Storage Management.","widgets":[{"id":2707362588155174,"definition":{"title":"S3 STORAGE AT A GLANCE ","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2888524102584005,"definition":{"title":"Total Storage","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":3728609543370222,"definition":{"title":"Total Objects","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.s3.number_of_objects{$team,$bucketname,$aws_region}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":12369813307491,"definition":{"title":"Total Buckets","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_not_null(query1)"}],"response_format":"scalar","queries":[{"query":"sum:aws.s3.bucket_size_bytes{$bucketname,$team} by {bucketname}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_links":[{"label":"Configure More Buckets","link":"https://app.datadoghq.com/storage-monitoring?mConfigure=true"}],"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":732986160552439,"definition":{"title":"Est. Monthly Cost (List Price)","title_size":"16","title_align":"left","time":{"type":"live","unit":"month","value":1},"type":"query_value","requests":[{"formulas":[{"formula":"((standard) / 1073741824 * 0.023) + ((standard_ia) / 1073741824 * 0.0125) + ((onezone_ia) / 1073741824 * 0.01) + ((intelligent_tiering) / 1073741824 * 0.023) + ((glacier_ir) / 1073741824 * 0.004) + ((glacier) / 1073741824 * 0.0036) + ((deep_archive) / 1073741824 * 0.00099) + ((express_one_zone) / 1073741824 * 0.16) + ((reduced_redundancy) / 1073741824 * 0.024)","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}}}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"standard","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardstorage}","aggregator":"last"},{"data_source":"metrics","name":"standard_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardiastorage}","aggregator":"last"},{"data_source":"metrics","name":"onezone_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:onezoneiastorage}","aggregator":"last"},{"data_source":"metrics","name":"intelligent_tiering","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:inteligentieringstorage}","aggregator":"last"},{"data_source":"metrics","name":"glacier_ir","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierinstantretrievalstorage}","aggregator":"last"},{"data_source":"metrics","name":"glacier","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierstorage}","aggregator":"last"},{"data_source":"metrics","name":"deep_archive","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:deeparchivestorage}","aggregator":"last"},{"data_source":"metrics","name":"express_one_zone","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:expressonezoneiastorage}","aggregator":"last"},{"data_source":"metrics","name":"reduced_redundancy","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:reducedredundancystorage}","aggregator":"last"}]}],"autoscale":true,"custom_links":[{"label":"View Cloud Cost Management","link":"https://app.datadoghq.com/cost"}],"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":8,"y":0,"width":2,"height":2}},{"id":1967848749451938,"definition":{"type":"note","content":"- **Bucket-level metrics** ‚Äî Available via the [AWS S3 integration](https://docs.datadoghq.com/integrations/amazon_s3/).\n- **Prefix-level metrics** ‚Äî Requires [Storage Management](https://app.datadoghq.com/storage-monitoring?mConfigure=true) to be enabled.\"\n","background_color":"yellow","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":10,"y":0,"width":2,"height":2}},{"id":7875784273401682,"definition":{"title":"Storage by Bucket","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.s3.bucket_size_bytes{$bucketname,$aws_account,$aws_region} by {bucketname}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":3}},{"id":8595604514184283,"definition":{"title":"Objects by Bucket","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.s3.number_of_objects{$aws_account,$bucketname,$aws_region} by {bucketname}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":3}},{"id":6236882504846725,"definition":{"title":"Storage by Tier and Bucket","title_size":"16","title_align":"left","type":"bar_chart","requests":[{"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.s3.bucket_size_bytes{$bucketname,$team,$aws_region} by {storagetype,bucketname}","aggregator":"last"}],"response_format":"scalar","formulas":[{"formula":"query1"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{"display":{"type":"stacked","legend":"automatic"},"palette":"datadog16"}},"layout":{"x":8,"y":2,"width":4,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":6}},{"id":1337438723755053,"definition":{"title":"Storage Bytes by Buckets/Prefix (Needs Storage Management)","type":"treemap","requests":[{"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.s3.inventory.total_prefix_size.levels{$bucketname,$aws_account,$aws_region, prefix0:* ,prefix1:* ,prefix2:* ,prefix3:*,prefix4:*} by {bucketname,prefix0,prefix1,prefix2,prefix3,prefix4}","aggregator":"last"}],"response_format":"scalar","style":{"palette":"datadog16"},"formulas":[{"formula":"query1"}]}]},"layout":{"x":0,"y":0,"width":12,"height":5}},{"id":3339737648992557,"definition":{"title":"üîç OPTIMIZATION OPPORTUNITIES - AVAILABLE WITH STORAGE MANAGEMENT ","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3119224734518293,"definition":{"type":"note","content":"## Get Deeper Insights with Storage Management\n\nThe widgets below use **Storage Management** metrics for prefix-level analysis. If they appear empty, you haven't enabled SM yet.\n\n**What you unlock:**\n- üîç **Prefix-level drill-down** - See exactly where storage is growing\n- ‚ùÑÔ∏è **Cold data detection** - Find unaccessed data in expensive tiers\n- üóëÔ∏è **Versioning overhead** - Spot non-current versions & delete markers\n- üì¶ **Small file waste** - Identify billing overhead from tiny objects\n\n‚Üí [**Enable Storage Management**](https://app.datadoghq.com/storage-monitoring?mConfigure=true)\n‚Üí [Setup Guide](https://docs.datadoghq.com/integrations/guide/storage-monitoring-setup/?tab=cloudformation)","background_color":"yellow","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":4,"height":3}},{"id":396911791210783,"definition":{"title":"Prefixes with Most Objects","title_size":"16","title_align":"left","type":"toplist","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.s3.inventory.prefix_object_count{$bucketname,$aws_account,$aws_region} by {prefix}.as_count()","aggregator":"last"}],"response_format":"scalar","formulas":[{"formula":"query1"}],"sort":{"count":20,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{"display":{"type":"stacked","legend":"automatic"}}},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":6169382893362193,"definition":{"title":"Prefixes with Most Storage","title_size":"16","title_align":"left","type":"toplist","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.s3.inventory.total_prefix_size{$bucketname,$aws_account,$aws_region} by {prefix}","aggregator":"last"}],"response_format":"scalar","formulas":[{"formula":"query1"}],"sort":{"count":20,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{"display":{"type":"stacked","legend":"automatic"}}},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":2132817110081270,"definition":{"title":"Increases in Storage by Prefix (WoW)","type":"change","custom_links":[{"label":"Create Growth Alert Monitor","link":"https://app.datadoghq.com/monitors/create?type=metric"}],"requests":[{"increase_good":false,"order_by":"change","change_type":"relative","order_dir":"desc","response_format":"scalar","formulas":[{"formula":"calendar_shift(query1, '-1w', 'America/New_York')"},{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.s3.inventory.total_prefix_size{$bucketname,$aws_account,$aws_region} by {bucketname,prefix}","aggregator":"last"}]}]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":1651312270357298,"definition":{"title":"Decreases in Storage by Prefix (WoW)","type":"change","custom_links":[{"label":"Create Growth Alert Monitor","link":"https://app.datadoghq.com/monitors/create?type=metric"}],"requests":[{"increase_good":false,"order_by":"change","change_type":"relative","order_dir":"asc","response_format":"scalar","formulas":[{"formula":"calendar_shift(query1, '-1w', 'America/New_York')"},{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.s3.inventory.total_prefix_size{$bucketname,$aws_account,$aws_region} by {bucketname,prefix}","aggregator":"last"}]}]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":4358983648348333,"definition":{"title":"Non Current Versions by Prefix","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"query":"sum:aws.s3.inventory.total_prefix_size{$bucketname,is_latest:false*} by {bucketname,storagetype,prefix}","data_source":"metrics","name":"query1","aggregator":"last"}],"response_format":"scalar","sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"cell_display_mode":"bar","alias":"Non Current Bytes","formula":"query1"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":3802777407538781,"definition":{"title":"Requests by Prefix (Requires Access Logs)","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"query":"sum:aws.s3.inventory.access_logs.total_requests_by_method{*} by {bucketname,prefix,method}","data_source":"metrics","name":"query1","aggregator":"avg"}],"response_format":"scalar","sort":{"count":50,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"conditional_formats":[{"custom_bg_color":"#e7dbff","comparator":">","palette":"custom_bg","value":0}],"cell_display_mode":"bar","alias":"Requests","formula":"query1"}]}],"has_search_bar":"auto","custom_links":[{"label":"Setup Access Logs","link":"https://docs.datadoghq.com/logs/guide/send-aws-services-logs-with-the-datadog-lambda-function/"}]},"layout":{"x":6,"y":6,"width":6,"height":3}}]},"layout":{"x":0,"y":11,"width":12,"height":10,"is_column_break":true}},{"id":8742818315139696,"definition":{"title":"üí∞ COST & GROWTH (ESTIMATED - LIST PRICE)","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":956667885293661,"definition":{"type":"note","content":"‚ö†Ô∏è **Estimated costs** below are calculated using **S3 list prices** (us-east-1 region). Actual costs may differ based on region, discounts, and pricing agreements. For precise, billing-aligned costs use **[Cloud Cost Management](https://app.datadoghq.com/cost)**.","background_color":"yellow","font_size":"14","text_align":"center","vertical_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":12,"height":1}},{"id":1205551798726545,"definition":{"title":"Top 10 Expensive Buckets (Est.)","title_size":"16","title_align":"left","type":"toplist","requests":[{"queries":[{"data_source":"metrics","name":"standard","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"standard_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"onezone_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:onezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"intelligent_tiering","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:inteligentieringstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier_ir","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierinstantretrievalstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"deep_archive","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:deeparchivestorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"express_one_zone","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:expressonezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"reduced_redundancy","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:reducedredundancystorage} by {bucketname}","aggregator":"last"}],"response_format":"scalar","formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}},"formula":"(default_zero(standard) / 1073741824 * 0.023) + (default_zero(standard_ia) / 1073741824 * 0.0125) + (default_zero(onezone_ia) / 1073741824 * 0.01) + (default_zero(intelligent_tiering) / 1073741824 * 0.023) + (default_zero(glacier_ir) / 1073741824 * 0.004) + (default_zero(glacier) / 1073741824 * 0.0036) + (default_zero(deep_archive) / 1073741824 * 0.00099) + (default_zero(express_one_zone) / 1073741824 * 0.16) + (default_zero(reduced_redundancy) / 1073741824 * 0.024)"}],"sort":{"count":25,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[{"label":"Investigate {{bucketname.value}} in Storage Management","link":"https://app.datadoghq.com/storage-monitoring/?id={{bucketname.value}}"}],"style":{"display":{"type":"stacked","legend":"automatic"},"palette":"datadog16"}},"layout":{"x":0,"y":1,"width":4,"height":3}},{"id":2329720913896314,"definition":{"title":"Biggest Cost Decreases by Bucket (WoW)","title_size":"16","title_align":"left","type":"change","custom_links":[{"label":"Investigate {{bucketname.value}} in Storage Management","link":"https://app.datadoghq.com/storage-monitoring/?id={{bucketname.value}}"}],"requests":[{"increase_good":false,"order_by":"change","change_type":"absolute","order_dir":"asc","response_format":"scalar","formulas":[{"formula":"calendar_shift((default_zero(standard) / 1073741824 * 0.023) + (default_zero(standard_ia) / 1073741824 * 0.0125) + (default_zero(glacier_ir) / 1073741824 * 0.004), '-1w', 'UTC')","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}}},{"formula":"(default_zero(standard) / 1073741824 * 0.023) + (default_zero(standard_ia) / 1073741824 * 0.0125) + (default_zero(glacier_ir) / 1073741824 * 0.004)"}],"queries":[{"data_source":"metrics","name":"standard","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"standard_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"onezone_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:onezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"intelligent_tiering","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:inteligentieringstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier_ir","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierinstantretrievalstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"deep_archive","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:deeparchivestorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"express_one_zone","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:expressonezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"reduced_redundancy","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:reducedredundancystorage} by {bucketname}","aggregator":"last"}],"show_present":true}]},"layout":{"x":4,"y":1,"width":4,"height":3}},{"id":2715436441961617,"definition":{"title":"Biggest Cost Increases by Bucket (WoW)","title_size":"16","title_align":"left","type":"change","custom_links":[{"label":"Investigate {{bucketname.value}}","link":"https://app.datadoghq.com/storage-monitoring/?id={{bucketname.value}}"}],"requests":[{"increase_good":false,"order_by":"change","change_type":"absolute","order_dir":"desc","response_format":"scalar","formulas":[{"formula":"calendar_shift((default_zero(standard) / 1073741824 * 0.023) + (default_zero(standard_ia) / 1073741824 * 0.0125) + (default_zero(glacier_ir) / 1073741824 * 0.004) + (default_zero(glacier) / 1073741824 * 0.0036) + (default_zero(deep_archive) / 1073741824 * 0.00099), '-1w', 'UTC')","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}}},{"formula":"(default_zero(standard) / 1073741824 * 0.023) + (default_zero(standard_ia) / 1073741824 * 0.0125) + (default_zero(glacier_ir) / 1073741824 * 0.004) + (default_zero(glacier) / 1073741824 * 0.0036) + (default_zero(deep_archive) / 1073741824 * 0.00099)","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}}}],"queries":[{"data_source":"metrics","name":"standard","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"standard_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:standardiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"onezone_ia","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:onezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"intelligent_tiering","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:inteligentieringstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier_ir","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierinstantretrievalstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"glacier","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:glacierstorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"deep_archive","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:deeparchivestorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"express_one_zone","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:expressonezoneiastorage} by {bucketname}","aggregator":"last"},{"data_source":"metrics","name":"reduced_redundancy","query":"sum:aws.s3.bucket_size_bytes{$team,$bucketname,$aws_region,storagetype:reducedredundancystorage} by {bucketname}","aggregator":"last"}],"show_present":true}]},"layout":{"x":8,"y":1,"width":4,"height":3}}]},"layout":{"x":0,"y":21,"width":12,"height":5}}],"template_variables":[{"name":"bucketname","prefix":"bucketname","available_values":[],"default":"*"},{"name":"aws_account","prefix":"aws_account","available_values":[],"default":"*"},{"name":"aws_region","prefix":"region","available_values":[],"default":"*"},{"name":"team","prefix":"team","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}
