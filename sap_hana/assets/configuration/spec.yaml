name: SAP HANA
fleet_configurable: true
files:
- name: sap_hana.yaml
  options:
  - template: init_config
    options:
      - name: persist_db_connections
        description: Whether or not to persist database connections.
        fleet_configurable: true
        value:
          type: boolean
          example: true
      - template: init_config/db
      - template: init_config/default
  - template: instances
    options:
      - name: server
        description: The hostname used to connect to the system.
        fleet_configurable: true
        required: true
        value:
          type: string
      - name: port
        description: The port used to connect to the system.
        fleet_configurable: true
        value:
          type: integer
          display_default: 30015
      - name: username
        description: The database user to authenticate as.
        fleet_configurable: true
        required: true
        value:
          type: string
      - name: password
        description: The password of `username`.
        fleet_configurable: true
        required: true
        secret: true
        value:
          type: string
      - name: schema
        description: The schema containing the tenant databases views.
        fleet_configurable: true
        value:
          type: string
          display_default: SYS_DATABASES
          example: SYS_DATABASES
      - name: connection_properties
        description: |
          When `hdbcli` is installed, this defines the properties of the database connections. Any property
          defined here overrides any default value set by the check. For more information, see:
          https://help.sap.com/viewer/f1b440ded6144a54ada97ff95dac7adf/2.10/en-US/ee592e89dcce4480a99571a4ae7a702f.html
        value:
          example:
            key: hdbuserid
            sslUseDefaultTrustStore: false
          type: object
          additionalProperties: true
      - name: use_hana_hostnames
        description: |
          Whether or not to use the hostnames contained in HANA's monitoring
          views instead of the Agent hostname.
        fleet_configurable: true
        value:
          type: boolean
          example: false
      - name: batch_size
        description: The number of rows to return with each query result.
        fleet_configurable: true
        value:
          type: integer
          example: 1000
      - name: timeout
        description: The timeout in seconds for connecting to `server`.
        value:
          type: number
          example: 10
      - template: instances/db
      - name: persist_db_connections
        description: Whether or not to persist database connections.
        value:
          type: boolean
          example: true
      - name: use_tls
        description: |
          Instructs the SAP HANA integration to connect using TLS.
        fleet_configurable: true
        value:
          example: false
          type: boolean
      - template: instances/tls
      - template: instances/default
  - template: logs
    example:
    - type: integration
      source: sap_hana
      service: sap_hana
