- name: metrics  # Only shown for the `windows_performance_counters` provider integration
  hidden: true
  description: |
    This mapping defines which metrics to collect from the performance
    counters on the `server`. For more information, see:
    https://docs.microsoft.com/en-us/windows/win32/perfctrs/about-performance-counters

    The top-level keys are the names of the desired performance objects:

      metrics:
        System:
          <OPTION_1>: ...
          <OPTION_2>: ...
        LogicalDisk:
          <OPTION_1>: ...
          <OPTION_2>: ...

    The available performance object options are:

      name (required): This becomes the prefix of all metrics submitted for each counter.
      counters (required): This is the list of counters to collect.
      tag_name: This is the name of the tag used for instances. For example, if the tag name for
                the `LogicalDisk` performance object is `disk`, a possible tag would be `disk:C:`.
                If not set, the default tag name is `instance`.
      include: This is the list of regular expressions used to select which instances to monitor.
               If not set, all instances are monitored.
      exclude: This is the list of regular expressions used to select which instances to ignore.
               If not set, no instances are ignored. Note: `_Total` instances are always ignored.
      instance_counts: This is a mapping used to select the count of instances to submit, where each
                       key is a count type and the value is the metric name to use, ignoring `name`.
                       The `total` count type represents the total number of encountered instances.
                       The `monitored` count type represents the number of monitored instances after
                       `include`/`exclude` filtering. The `unique` count type represents the number
                       of unique instance names that are monitored.
      use_localized_counters: Whether or not performance object and counter names should refer to their
                              locale-specific versions rather than by their English name. This overrides
                              any defined value in `init_config`.

    The key for each counter object represents the name of the desired counter.
    Counters may be defined in 2 ways:

    1. If a value is a string, then it represents the suffix of the sent metric name. For example:

         counters:
         - '% Free Space': usable
         - Current Disk Queue Length: queue_length.current

    2. If a value is a mapping, then it must have a `name` key that represents the suffix of the
       sent metric name, or a `metric_name` key that represents the full metric name and will not
       be prefixed by the parent object's `name` key. For example:

         counters:
         - '% Free Space':
             metric_name: sys.mem.usable
         - Current Disk Queue Length:
             name: queue_length.current

    The available counter options are:

      type: This represents how the metric is handled, defaulting to `gauge`.
      average: When there are multiple values for the same instance name (e.g. multiple processes
               spawned with the same name) the check submits the sum. Setting this option to `true`
               instructs the check to calculate the average instead.
      aggregate: Whether or not to send an additional metric that is the aggregation of all values for
                 every monitored instance. If `average` is set to `true` the check submits the average as
                 a metric suffixed by `avg`, otherwise it submits the sum as a metric suffixed by `sum`.
                 If this is set to `only`, the check will not submit a metric per instance.
  value:
    type: object
    additionalProperties:
      type: object
      required:
      - name
      - counters
      properties:
      - name: name
        type: string
      - name: tag_name
        type: string
      - name: include
        type: array
        items:
          type: string
      - name: exclude
        type: array
        items:
          type: string
      - name: instance_counts
        type: object
        properties:
        - name: total
          type: string
        - name: monitored
          type: string
        - name: unique
          type: string
      - name: use_localized_counters
        type: boolean
      - name: counters
        type: array
        items:
          type: object
          additionalProperties:
            anyOf:
            - type: string
            - type: object
              properties:
              - name: name
                type: string
              - name: type
                type: string
              - name: average
                type: boolean
              - name: aggregate
                anyOf:
                - type: boolean
                - type: string
                  enum:
                  - only
              - name: metric_name
                type: string
              additionalProperties: true
- name: namespace
  hidden: true  # Only shown for the `windows_performance_counters` provider integration
  description: |
    The namespace to be prepended to all metrics.
  value:
    type: string
    pattern: '\w*'
- name: server
  description: |
    The server with which to connect, defaulting to the local machine.
  value:
    type: string
- name: username
  description: |
    The username used to connect to `server`.
  value:
    type: string
- name: password
  description: |
    The password of `username`.
  value:
    type: string
- name: enable_health_service_check
  description: |
    Whether or not to send a service check named `<NAMESPACE>.windows.perf.health` which reports
    the health of the `server`.
  value:
    example: true
    type: boolean
- name: server_tag
  description: |
    The name used for tagging `server`.
  value:
    type: string
- name: extra_metrics  # Hidden for the `windows_performance_counters` provider integration
  description: |
    This mapping defines which metrics to collect from the performance
    counters on the `server`. For more information, see:
    https://docs.microsoft.com/en-us/windows/win32/perfctrs/about-performance-counters

    The top-level keys are the names of the desired performance objects:

      metrics:
        System:
          <OPTION_1>: ...
          <OPTION_2>: ...
        LogicalDisk:
          <OPTION_1>: ...
          <OPTION_2>: ...

    The available performance object options are:

      name (required): This becomes the prefix of all metrics submitted for each counter.
      counters (required): This is the list of counters to collect.
      tag_name: This is the name of the tag used for instances. For example, if the tag name for
                the `LogicalDisk` performance object is `disk`, a possible tag would be `disk:C:`.
                If not set, the default tag name is `instance`.
      include: This is the list of regular expressions used to select which instances to monitor.
               If not set, all instances are monitored.
      exclude: This is the list of regular expressions used to select which instances to ignore.
               If not set, no instances are ignored. Note: `_Total` instances are always ignored.
      instance_counts: This is a mapping used to select the count of instances to submit, where each
                       key is a count type and the value is the metric name to use, ignoring `name`.
                       The `total` count type represents the total number of encountered instances.
                       The `monitored` count type represents the number of monitored instances after
                       `include`/`exclude` filtering. The `unique` count type represents the number
                       of unique instance names that are monitored.
      use_localized_counters: Whether or not performance object and counter names should refer to their
                              locale-specific versions rather than by their English name. This overrides
                              any defined value in `init_config`.

    The key for each counter object represents the name of the desired counter.
    Counters may be defined in 2 ways:

    1. If a value is a string, then it represents the suffix of the sent metric name. For example:

         counters:
         - '% Free Space': usable
         - Current Disk Queue Length: queue_length.current

    2. If a value is a mapping, then it must have a `name` key that represents the suffix of the
       sent metric name, or a `metric_name` key that represents the full metric name and will not
       be prefixed by the parent object's `name` key. For example:

         counters:
         - '% Free Space':
             metric_name: sys.mem.usable
         - Current Disk Queue Length:
             name: queue_length.current

    The available counter options are:

      type: This represents how the metric is handled, defaulting to `gauge`.
      average: When there are multiple values for the same instance name (e.g. multiple processes
               spawned with the same name) the check submits the sum. Setting this option to `true`
               instructs the check to calculate the average instead.
      aggregate: Whether or not to send an additional metric that is the aggregation of all values for
                 every monitored instance. If `average` is set to `true` the check submits the average as
                 a metric suffixed by `avg`, otherwise it submits the sum as a metric suffixed by `sum`.
                 If this is set to `only`, the check will not submit a metric per instance.
  value:
    type: object
    additionalProperties:
      type: object
      required:
      - name
      - counters
      properties:
      - name: name
        type: string
      - name: tag_name
        type: string
      - name: include
        type: array
        items:
          type: string
      - name: exclude
        type: array
        items:
          type: string
      - name: instance_counts
        type: object
        properties:
        - name: total
          type: string
        - name: monitored
          type: string
        - name: unique
          type: string
      - name: use_localized_counters
        type: boolean
      - name: counters
        type: array
        items:
          type: object
          additionalProperties:
            anyOf:
            - type: string
            - type: object
              properties:
              - name: name
                type: string
              - name: type
                type: string
              - name: average
                type: boolean
              - name: aggregate
                anyOf:
                - type: boolean
                - type: string
                  enum:
                  - only
              - name: metric_name
                type: string
              additionalProperties: true
