version: '3'

# Adapted from https://github.com/Lewuathe/docker-presto-cluster
services:
  coordinator:
    build:
      context: datadog/docker-library:presto
      args:
        NODE_TYPE: coordinator
        NODE_ID: coordinator
        VERSION: latest
    container_name: presto_coordinator
    # labels:
      # com.datadoghq.ad.logs: '[{"source":"presto"}]'
    ports:
      - "8080:8080"
      - "9997:9999"

  worker1:
    build:
      context: datadog/docker-library:presto
      args:
        NODE_TYPE: worker
        NODE_ID: worker1
        VERSION: latest
    container_name: presto_worker1
    # labels:
      # com.datadoghq.ad.logs: '["source":"presto"]'
    ports:
      - "8081:8080"
      - "9998:9999"

  worker2:
    build:
      context: datadog/docker-library:presto
      args:
        NODE_TYPE: worker
        NODE_ID: worker2
        VERSION: latest
    container_name: presto_worker2
    # labels:
      # com.datadoghq.ad.logs: '["source":"presto"]'
    ports:
      - "8082:8080"
      - "9999:9999"
