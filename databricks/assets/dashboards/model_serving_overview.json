{
  "title": "Databricks Model Serving Overview",
  "description": "This Dashboard provides a high level overview of your Pinecone service. Use it to monitor the health and performance of your vector database. \n\nFor further information, see the [Pinecone Integration Documentation](https://docs.datadoghq.com/integrations/pinecone/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets": [
    {
      "id": 4831622862262762,
      "definition": {
        "title": "New group",
        "banner_img": "/static/images/integration_dashboard/databricks_hero_1.png",
        "show_title": false,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 696611051845420,
            "definition": {
              "type": "note",
              "content": "This dashboard provides a high level overview of the health of your Databricks model serving endpoints. These include metrics such as latency, request rate, error rate, CPU usage, etc. This can be used to visualize how your serving infrastructure is behaving.\n\nFor further information, see the [Databricks Integration Documentation](##TODO##)",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 5,
        "is_column_break": true
      }
    },
    {
      "id": 7064634868158922,
      "definition": {
        "title": "Resource Utilization",
        "background_color": "blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3901347486774608,
            "definition": {
              "title": "Average CPU Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "max:databricks.model_serving.cpu_usage_percentage{*}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 4
            }
          },
          {
            "id": 968488512949198,
            "definition": {
              "title": "Average Memory Usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 * 100"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:databricks.model_serving.mem_usage_percentage{$workspace_name, $endpoint_name, $served_model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 5
      }
    },
    {
      "id": 1871554135387136,
      "definition": {
        "title": "Requests",
        "background_color": "blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6529177075666408,
            "definition": {
              "title": "Request Count Total",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query3",
                      "data_source": "metrics",
                      "query": "max:databricks.model_serving.request_count_total{$endpoint_name,$served_model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 1065036086071286,
            "definition": {
              "title": "Total Count of 5xx Requests ",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:databricks.model_serving.request_5xx_count_total{$workspace_name, $endpoint_name, $served_model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 881874285244070,
            "definition": {
              "title": "Total Provisioned Concurrent Requests",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query3"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query3",
                      "data_source": "metrics",
                      "query": "avg:databricks.model_serving.provisioned_concurrent_requests_total{$endpoint_name, $served_model_name, $workspace_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 6,
              "height": 2
            }
          },
          {
            "id": 4909130068995700,
            "definition": {
              "title": "Requests 4xx Count Total",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "name": "query1",
                      "data_source": "metrics",
                      "query": "avg:databricks.model_serving.request_4xx_count_total{$workspace_name, $endpoint_name, $served_model_name}"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 2,
              "width": 6,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 5,
        "width": 12,
        "height": 5
      }
    }
  ],
  "template_variables": [
    {
      "name": "workspace_id",
      "prefix": "workspace_id",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "workspace_name",
      "prefix": "workspace_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "endpoint_name",
      "prefix": "index_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "served_model_name",
      "prefix": "served_model_name",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}