{
    "author_name": "Datadog",
    "description": "The Snowflake Organization Usage Metrics dashboard provides insight into organization-wide data, so you can see key metrics about cost, usage, and storage across all snowflake accounts in one place.\n\nTo get started, follow our docs to set up organization usage monitoring in [Snowflake](https://github.com/DataDog/integrations-core/tree/master/snowflake).\n\nFor more information about the data collected, view Snowflake's [organization usage docs](https://docs.snowflake.com/en/sql-reference/organization-usage.html).",
    "layout_type": "ordered",
    "template_variables": [
        {
            "available_values": [],
            "default": "*",
            "name": "billing_account",
            "prefix": "billing_account"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "scope",
            "prefix": ""
        }
    ],
    "title": "Snowflake Organization Metrics",
    "widgets": [
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Credit Usage",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "purple",
                            "content": "With Datadog's Snowflake integration, you can track key metrics about cost and credit usage at an organization level. In this metric group you can see the hourly credit usage for all warehouses across all the accounts in your Snowflake organization. ",
                            "font_size": "16",
                            "has_padding": true,
                            "show_tick": false,
                            "text_align": "left",
                            "tick_edge": "top",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 8085433307069582,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.warehouse.total_credit.sum{$billing_account,$scope} by {warehouse}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used per Warehouse",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 8890610446950900,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.warehouse.virtual_warehouse.sum{$billing_account,$scope} by {warehouse}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used per Warehouse",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 8265538452433954,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.warehouse.cloud_service.sum{$billing_account,$scope} by {warehouse}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used by Cloud Services per Warehouse",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 2640985809960116,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 6,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 5888126069922378,
            "layout": {
                "height": 5,
                "width": 12,
                "x": 0,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Contract Items",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "blue",
                            "content": "Datadog's Snowflake integration allows you to view key information about your Snowflake contracts, including the amount in currency of all your current contracts, broken down by contract item. ",
                            "font_size": "16",
                            "has_padding": true,
                            "show_tick": true,
                            "text_align": "left",
                            "tick_edge": "bottom",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 3766700878304358,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.contract.amount{$billing_account,$scope} by {contract_item,contract_number,currency}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Contract Item Amount",
                            "type": "treemap"
                        },
                        "id": 1652193372904860,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 2904655527205698,
            "layout": {
                "height": 6,
                "width": 6,
                "x": 0,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Rate Sheet",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "blue",
                            "content": "You can view the rate used for calculating usage, which also takes into account any discounts from the contract for your organization. You can also see the breakdown of usage per service type and usage type.\n\n",
                            "font_size": "16",
                            "has_padding": true,
                            "show_tick": true,
                            "text_align": "left",
                            "tick_edge": "bottom",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 3568889871424130,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.rate.effective_rate{$billing_account,$scope} by {billing_account,contract_number,currency,usage_type,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Effective Rate ",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 4459867906638788,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 6294530637407728,
            "layout": {
                "height": 6,
                "width": 6,
                "x": 6,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Daily Credit Usage",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "purple",
                            "content": "You can also view the daily credit usage across all your accounts, including information about the usage from cloud services and the rebates applied to your cloud service usage. Finally, you can see what was actually billed to your account from the previous day given these adjustments.",
                            "font_size": "16",
                            "has_padding": true,
                            "show_tick": false,
                            "text_align": "left",
                            "tick_edge": "top",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 8571645785666458,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:snowflake.organization.credit.total_credits_billed.sum{$billing_account,$scope} by {billing_account,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Billed per Service Type",
                            "type": "toplist"
                        },
                        "id": 2603359532986198,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:snowflake.organization.credit.virtual_warehouse.sum{$billing_account,$scope} by {billing_account,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used for Compute per Service Type",
                            "type": "toplist"
                        },
                        "id": 1345767588247680,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 3
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:snowflake.organization.credit.cloud_service.sum{$billing_account,$scope} by {billing_account,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used for Cloud Services per Service Type",
                            "type": "toplist"
                        },
                        "id": 2229081329739746,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 3
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:snowflake.organization.credit.total_credit.sum{$billing_account,$scope} by {billing_account,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total Credits Used per Service Type",
                            "type": "toplist"
                        },
                        "id": 2461377992341270,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 6
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "abs(query1)",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:snowflake.organization.credit.cloud_service_adjustment.sum{$billing_account,$scope} by {billing_account,service_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Adjusted for Cloud Services per Service Type",
                            "type": "toplist"
                        },
                        "id": 3894391589656022,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 6
                        }
                    }
                ]
            },
            "id": 885293508409100,
            "layout": {
                "height": 10,
                "width": 12,
                "x": 0,
                "y": 11
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Balance",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "alias": "Balance",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.balance.capacity{$billing_account,$scope} by {contract_number,currency}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Available Balance in Currency",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 1075727071974156,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "alias": "Usage",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.balance.free_usage{$billing_account,$scope} by {contract_number,currency}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Free Usage in Currency",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2146183791466734,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "alias": "Balance",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.balance.rollover{$billing_account,$scope} by {contract_number,currency}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Rollover Balance in Currency",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 7699792291801318,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "alias": "Consumption",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.balance.on_demand_consumption{$billing_account,$scope} by {contract_number,currency}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Consumption at on Demand Prices",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 5834465578288372,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 6,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 3702666235793118,
            "layout": {
                "height": 5,
                "width": 12,
                "x": 0,
                "y": 21
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Usage in Currency",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.currency.usage{$billing_account,$scope} by {usage_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Charged per Usage Type",
                            "type": "treemap"
                        },
                        "id": 2752166910614806,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.currency.usage_in_currency{$billing_account,$scope} by {usage_type}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Amount Charged per Usage Type",
                            "type": "treemap"
                        },
                        "id": 6112957327242890,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 8132223270084302,
            "layout": {
                "height": 5,
                "width": 6,
                "x": 0,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Storage",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.storage.credits{$billing_account,$scope} by {billing_account}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Credits Used per Account",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "sunburst"
                        },
                        "id": 4255297952719830,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.storage.average_bytes{$billing_account,$scope} by {billing_account}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Database Storage Used per Account",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "sunburst"
                        },
                        "id": 4338933834155836,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 6138507417951796,
            "layout": {
                "height": 5,
                "width": 6,
                "x": 6,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_blue",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Data Transfer",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "blue",
                            "content": "With Datadog's Snowflake integration, you can track the amount of data transferred from Snowflake tables from one cloud to another.",
                            "font_size": "16",
                            "has_padding": true,
                            "show_tick": true,
                            "text_align": "left",
                            "tick_edge": "bottom",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 437502800839114,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 10,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:snowflake.organization.data_transfer.bytes_transferred{$billing_account,$scope} by {transfer_type,target_cloud,source_cloud,billing_account}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Bytes Transferred between Clouds",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 5541564800061956,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 2
                        }
                    }
                ]
            },
            "id": 8595743917159442,
            "layout": {
                "height": 5,
                "width": 6,
                "x": 0,
                "y": 0
            }
        }
    ]
}