{
    "title":"FoundationDB Processes and Utilization",
    "description":"## FoundationDB Processes and Utilization\n\nProvides an overview of the cluster, in terms of the number of processes playing each database role, along with information about its resource utilization.",
    "widgets":[
       {
          "id":3676765702429392,
          "definition":{
             "title":"Machines",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.machines{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":0,
             "y":0,
             "width":2,
             "height":2
          }
       },
       {
          "id":3143292521962854,
          "definition":{
             "title":"Total Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":2,
             "y":0,
             "width":2,
             "height":2
          }
       },
       {
          "id":1667242188538218,
          "definition":{
             "title":"Degraded Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":">=",
                         "palette":"white_on_yellow",
                         "value":1
                      },
                      {
                         "comparator":"<=",
                         "palette":"white_on_green",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.degraded_processes{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":4,
             "y":0,
             "width":2,
             "height":2
          }
       },
       {
          "id":2654304418028122,
          "definition":{
             "type":"note",
             "content":"Each FoundationDB process may play one or more roles, and run across multiple machines. See the [FoundationDB documentation](https://apple.github.io/foundationdb/kv-architecture.html) to learn about each role.\n\nThe exact meaning of \"degraded\" varies with process; currently it applies to transaction log processes that could not commit for > 5s. ",
             "background_color":"white",
             "font_size":"14",
             "text_align":"left",
             "vertical_align":"top",
             "show_tick":false,
             "tick_pos":"50%",
             "tick_edge":"left",
             "has_padding":true
          },
          "layout":{
             "x":6,
             "y":0,
             "width":6,
             "height":2
          }
       },
       {
          "id":1161307580717540,
          "definition":{
             "title":"Storage Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":"<=",
                         "palette":"white_on_red",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.storage{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":0,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":2862821885719920,
          "definition":{
             "title":"Log Process",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":"<=",
                         "palette":"white_on_red",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.log{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":2,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":8781065894596158,
          "definition":{
             "title":"Proxy Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":"<=",
                         "palette":"white_on_red",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.proxy{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":4,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":7273173764122036,
          "definition":{
             "title":"Resolver Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.resolver{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":6,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":7085394008489344,
          "definition":{
             "title":"Master Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":"<=",
                         "palette":"white_on_red",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.master{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":8,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":3092674199386434,
          "definition":{
             "title":"Coordinator Processes",
             "title_size":"16",
             "title_align":"left",
             "type":"query_value",
             "requests":[
                {
                   "formulas":[
                      {
                         "formula":"query1"
                      }
                   ],
                   "conditional_formats":[
                      {
                         "comparator":"<=",
                         "palette":"white_on_red",
                         "value":0
                      }
                   ],
                   "response_format":"scalar",
                   "queries":[
                      {
                         "query":"avg:foundationdb.processes_per_role.coordinator{$service}",
                         "data_source":"metrics",
                         "name":"query1",
                         "aggregator":"avg"
                      }
                   ]
                }
             ],
             "autoscale":true,
             "precision":2
          },
          "layout":{
             "x":10,
             "y":2,
             "width":2,
             "height":2
          }
       },
       {
          "id":6504908018533310,
          "definition":{
             "title":"Disk",
             "type":"group",
             "show_title":true,
             "layout_type":"ordered",
             "widgets":[
                {
                   "id":8892362908601958,
                   "definition":{
                      "title":"Free bytes (by process)",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":false,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Average free bytes",
                                  "formula":"query1"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.process.disk.free_bytes{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               },
                               {
                                  "query":"min:foundationdb.process.disk.free_bytes{$service}",
                                  "data_source":"metrics",
                                  "name":"query2"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":0,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                },
                {
                   "id":5753020544966792,
                   "definition":{
                      "title":"Reads per process",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Average",
                                  "formula":"query1"
                               },
                               {
                                  "alias":"Maximum",
                                  "formula":"query2"
                               },
                               {
                                  "alias":"Minimum",
                                  "formula":"query3"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.process.disk.reads.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               },
                               {
                                  "query":"max:foundationdb.process.disk.reads.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query2"
                               },
                               {
                                  "query":"max:foundationdb.process.disk.reads.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query3"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":4,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                },
                {
                   "id":1837899632912002,
                   "definition":{
                      "title":"Writes per process",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Average",
                                  "formula":"query1"
                               },
                               {
                                  "alias":"Maximum",
                                  "formula":"query2"
                               },
                               {
                                  "alias":"Minimum",
                                  "formula":"query3"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.process.disk.writes.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               },
                               {
                                  "query":"max:foundationdb.process.disk.writes.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query2"
                               },
                               {
                                  "query":"max:foundationdb.process.disk.writes.hz{$service}",
                                  "data_source":"metrics",
                                  "name":"query3"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":8,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                }
             ]
          },
          "layout":{
             "x":0,
             "y":4,
             "width":12,
             "height":3
          }
       },
       {
          "id":7983844236839460,
          "definition":{
             "title":"Database size",
             "type":"group",
             "show_title":true,
             "layout_type":"ordered",
             "widgets":[
                {
                   "id":8055761704044166,
                   "definition":{
                      "title":"Total key/value store bytes",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Bytes",
                                  "formula":"query1"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.data.total_kv_size_bytes{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":0,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                },
                {
                   "id":5871425226541672,
                   "definition":{
                      "title":"System key/value store bytes",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Bytes",
                                  "formula":"query1"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.data.system_kv_size_bytes{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":4,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                },
                {
                   "id":3986738728565432,
                   "definition":{
                      "title":"Total disk used bytes",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Bytes",
                                  "formula":"query1"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.data.total_disk_used_bytes{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":8,
                      "y":0,
                      "width":4,
                      "height":2
                   }
                }
             ]
          },
          "layout":{
             "x":0,
             "y":7,
             "width":12,
             "height":3
          }
       },
       {
          "id":3362561337492660,
          "definition":{
             "title":"CPU",
             "type":"group",
             "show_title":true,
             "layout_type":"ordered",
             "widgets":[
                {
                   "id":7503981268285528,
                   "definition":{
                      "title":"CPU Core Usage",
                      "title_size":"16",
                      "title_align":"left",
                      "show_legend":true,
                      "legend_layout":"auto",
                      "legend_columns":[
                         "avg",
                         "min",
                         "max",
                         "value",
                         "sum"
                      ],
                      "type":"timeseries",
                      "requests":[
                         {
                            "formulas":[
                               {
                                  "alias":"Average",
                                  "formula":"query1"
                               },
                               {
                                  "alias":"Minimum",
                                  "formula":"query2"
                               },
                               {
                                  "alias":"Maximum",
                                  "formula":"query3"
                               }
                            ],
                            "response_format":"timeseries",
                            "queries":[
                               {
                                  "query":"avg:foundationdb.process.cpu.usage_cores{$service}",
                                  "data_source":"metrics",
                                  "name":"query1"
                               },
                               {
                                  "query":"min:foundationdb.process.cpu.usage_cores{$service}",
                                  "data_source":"metrics",
                                  "name":"query2"
                               },
                               {
                                  "query":"max:foundationdb.process.cpu.usage_cores{$service}",
                                  "data_source":"metrics",
                                  "name":"query3"
                               }
                            ],
                            "style":{
                               "palette":"dog_classic",
                               "line_type":"solid",
                               "line_width":"normal"
                            },
                            "display_type":"line"
                         }
                      ],
                      "yaxis":{
                         "include_zero":true,
                         "scale":"linear",
                         "label":"",
                         "min":"auto",
                         "max":"auto"
                      },
                      "markers":[

                      ]
                   },
                   "layout":{
                      "x":0,
                      "y":0,
                      "width":12,
                      "height":2
                   }
                }
             ]
          },
          "layout":{
             "x":0,
             "y":10,
             "width":12,
             "height":3
          }
       }
    ],
    "template_variables":[
       {
          "name":"service",
          "default":"*",
          "prefix":"service",
          "available_values":[

          ]
       }
    ],
    "layout_type":"ordered",
    "is_read_only":false,
    "notify_list":[
    ],
    "reflow_type":"fixed"
 }
