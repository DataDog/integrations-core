{
	"version": 2,
	"created_at": "2024-09-30",
	"last_updated_at": "2024-09-30",
	"title": "Messages error rate is higher than usual",
	"description": "The error rate rises when a significant number of messages fail to be delivered or sent. This monitor tracks the error rate for messages delivered/sent via Plivo, ensuring that any spikes in errors are quickly detected to maintain the reliability of messages delivery.",
	"definition": {
		"id": 153051596,
		"name": "Messages error rate is higher than usual",
		"type": "log alert",
		"query": "formula(\"(query1 - query) / query1\").last(\"1h\") >= 0.05",
		"message": "{{#is_alert}}\nThe high error rate detected while sending message through Plivo within the last hour. Errors have exceeded the threshold, which may impact message delivery reliability. Review your Plivo account.\n{{/is_alert}}",
		"tags": [
			"plivo"
		],
		"options": {
			"thresholds": {
				"critical": 0.05
			},
			"enable_logs_sample": true,
			"notify_audit": false,
			"on_missing_data": "default",
			"include_tags": true,
			"variables": [
				{
					"data_source": "logs",
					"name": "query1",
					"indexes": [
						"*"
					],
					"compute": {
						"aggregation": "count"
					},
					"group_by": [
						{
							"facet": "@messaging.message_id",
							"limit": 10,
							"sort": {
								"order": "desc",
								"aggregation": "count"
							}
						}
					],
					"search": {
						"query": "source:plivo"
					},
					"storage": "hot"
				},
				{
					"data_source": "logs",
					"name": "query",
					"indexes": [
						"*"
					],
					"compute": {
						"aggregation": "count"
					},
					"group_by": [
						{
							"facet": "@messaging.message_id",
							"limit": 10,
							"sort": {
								"order": "desc",
								"aggregation": "count"
							}
						}
					],
					"search": {
						"query": "source:plivo @plivo.error.type:000"
					},
					"storage": "hot"
				}
			],
			"silenced": {}
		},
		"priority": null,
		"restriction_policy": {
			"bindings": []
		}
	},
	"tags": [
		"integration:plivo"
	]
}