{
    "author_name": "Datadog",
    "description": "HPC Overview Dashboard",
    "layout_type": "ordered",
    "template_variables": [
        {
            "available_values": [],
            "default": "hpc_sandbox",
            "name": "cluster_name",
            "prefix": "cluster_name"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "slurm_job_id",
            "prefix": "slurm_job_id"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "slurm_partition_name",
            "prefix": "slurm_partition_name"
        }
    ],
    "title": "HPC Overview Dashboard",
    "widgets": [
        {
            "definition": {
                "banner_img": "https://media-assets-cdn.zenduty.com/blogscontent/2023/12/datadog.webp",
                "layout_type": "ordered",
                "show_title": false,
                "title": "",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "background_color": "transparent",
                            "content": "The information presented in this dashboard is meant to serve as a starting point for monitoring HPC systems. While today only Slurm jobs are linked, in the future we plan to add Altair PBS Pro and IBM LSF.\n\nUse the filters at the top to select individual:\n- Cluster names\n- Slurm job IDs\n- Slurm partition names\n\nAlso see the monitor templates and documentation for each integration: \n- [Slurm integration documentation](https://docs.datadoghq.com/integrations/slurm/) \n- [Slurm monitor templates](https://app.datadoghq.com/dashboard/h8y-w77-pfv/monitors/recommended?q=slurm) \n- [Lustre integration documentation](https://docs.datadoghq.com/integrations/lustre/) \n- [Lustre monitor templates](https://app.datadoghq.com/dashboard/h8y-w77-pfv/monitors/recommended?q=lustre) ",
                            "font_size": "14",
                            "has_padding": true,
                            "show_tick": false,
                            "text_align": "left",
                            "tick_edge": "left",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 4092177364944842,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "background_color": "purple",
                            "content": "Want to access HPC Monitoring features early?  \nBecome an [HPC Design Partner](https://forms.gle/9myLwrDyEd3TZai17).\n",
                            "font_size": "16",
                            "has_padding": false,
                            "show_tick": false,
                            "text_align": "center",
                            "tick_edge": "bottom",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "center"
                        },
                        "id": 4029574076135208,
                        "layout": {
                            "height": 1,
                            "width": 6,
                            "x": 0,
                            "y": 3
                        }
                    }
                ]
            },
            "id": 4176457677686067,
            "layout": {
                "height": 7,
                "width": 6,
                "x": 0,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Overview",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "color_preference": "text",
                            "count": 50,
                            "display_format": "countsAndList",
                            "hide_zero_counts": true,
                            "last_triggered_format": "relative",
                            "query": "tag:integration:slurm OR tag:integration:dcgm OR tag:hpc",
                            "show_last_triggered": false,
                            "show_priority": false,
                            "show_status": true,
                            "sort": "status,asc",
                            "start": 0,
                            "summary_type": "monitors",
                            "title": "Cluster Monitors",
                            "type": "manage_status"
                        },
                        "id": 292534009777161,
                        "layout": {
                            "height": 4,
                            "width": 6,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "columns": [
                                        {
                                            "field": "status_line",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "timestamp",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "host",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "service",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "content",
                                            "width": "auto"
                                        }
                                    ],
                                    "query": {
                                        "data_source": "logs_stream",
                                        "indexes": [],
                                        "query_string": "\"slurm\" OR \"dcgm\"",
                                        "sort": {
                                            "column": "timestamp",
                                            "order": "desc"
                                        },
                                        "storage": "hot"
                                    },
                                    "response_format": "event_list"
                                }
                            ],
                            "title": "Cluster Logs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "list_stream"
                        },
                        "id": 5713731829726824,
                        "layout": {
                            "height": 2,
                            "width": 6,
                            "x": 0,
                            "y": 4
                        }
                    }
                ]
            },
            "id": 7670361370297804,
            "layout": {
                "height": 7,
                "width": 6,
                "x": 6,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Jobs Overview (Slurm)",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.sacct.job.info{slurm_job_state:completed,$slurm_job_id,$slurm_partition_name,$cluster_name,!slurm_job_id_suffix:*}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Successful Jobs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1361504906279416,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:slurm.sacct.job.info{NOT (slurm_job_state:completed* OR slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND $slurm_partition_name AND $cluster_name AND NOT slurm_job_id_suffix:*}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Failed Jobs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 4147221074411924,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 2,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:slurm.sdiag.jobs_pending{$cluster_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Pending Jobs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 3332203646130209,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 4,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:slurm.sdiag.jobs_running{$cluster_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Running Jobs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 6464925848816363,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "default_zero(query1)",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.sdiag.backfill.last_depth_cycle{*}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Last Scheduler Backfill Depth",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 8982923636364854,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 8,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:slurm.sdiag.cycles_per_minute{*}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Scheduling Executions Per Minute",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 636168382467666,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 10,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:slurm.squeue.job.info{(slurm_job_state:running* OR slurm_job_state:pending:*) AND $slurm_job_id} by {slurm_job_id}.fill(null)"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "blue"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Active Jobs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 771880378034500,
                        "layout": {
                            "height": 3,
                            "width": 12,
                            "x": 0,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "has_search_bar": "auto",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "CPU Time",
                                            "cell_display_mode": "bar",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "CPU Efficiency",
                                            "cell_display_mode": "bar",
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        },
                                        {
                                            "alias": "Mem Efficiency",
                                            "cell_display_mode": "bar",
                                            "formula": "query3",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "max:slurm.sacct.slurm_job_cputime{slurm_job_state:completed,$slurm_job_id,$slurm_partition_name,$cluster_name,!slurm_job_id_suffix:*} by {slurm_job_id,slurm_job_name,slurm_job_partition}.fill(null)"
                                        },
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:slurm.seff.cpu_efficiency{slurm_job_state:completed,$slurm_job_id,$slurm_partition_name,$cluster_name,!slurm_job_id_suffix:*} by {slurm_job_id,slurm_job_name,slurm_job_partition}.fill(null)"
                                        },
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "max:slurm.seff.memory_efficiency{slurm_job_state:completed,$slurm_job_id,$slurm_partition_name,$cluster_name,!slurm_job_id_suffix:*} by {slurm_job_id,slurm_job_name,slurm_job_partition}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 100,
                                        "order_by": [
                                            {
                                                "name": "slurm_job_id",
                                                "order": "desc",
                                                "type": "group"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "title": "Successful Jobs List",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 3790101834715959,
                        "layout": {
                            "height": 4,
                            "width": 5,
                            "x": 0,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "has_search_bar": "auto",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": " CPU Time",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:slurm.sacct.slurm_job_cputime{NOT (slurm_job_state:completed* OR slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND $slurm_partition_name AND $cluster_name AND NOT slurm_job_id_suffix:*} by {slurm_job_id,slurm_job_name,slurm_job_partition,slurm_job_state,slurm_job_exitcode}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 100,
                                        "order_by": [
                                            {
                                                "name": "slurm_job_id",
                                                "order": "desc",
                                                "type": "group"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "title": "Failed Jobs List",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 5031314311773205,
                        "layout": {
                            "height": 4,
                            "width": 4,
                            "x": 5,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:slurm.sacct.job.info{NOT (slurm_job_state:completed* OR slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND NOT slurm_job_id_suffix:* AND $slurm_partition_name} by {slurm_job_id,slurm_job_state,slurm_job_exitcode}.fill(null)"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "red"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Job Errors",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 6411031142492367,
                        "layout": {
                            "height": 4,
                            "width": 3,
                            "x": 9,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "has_search_bar": "always",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "CPU Time",
                                            "cell_display_mode": "bar",
                                            "formula": "query1"
                                        },
                                        {
                                            "alias": "Avg RSS",
                                            "cell_display_mode": "bar",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "Avg Disk Read",
                                            "cell_display_mode": "bar",
                                            "formula": "query3"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:slurm.sacct.slurm_job_cputime{NOT (slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND $slurm_partition_name AND $cluster_name} by {slurm_job_id,slurm_job_id_suffix,slurm_job_state,slurm_job_exitcode,slurm_job_cpus,slurm_job_maxvm}.fill(null)"
                                        },
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "max:slurm.sacct.slurm_job_avgrss{NOT (slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND $slurm_partition_name AND $cluster_name} by {slurm_job_id,slurm_job_id_suffix,slurm_job_state,slurm_job_exitcode,slurm_job_cpus,slurm_job_maxvm}.fill(null)"
                                        },
                                        {
                                            "aggregator": "max",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "max:slurm.sacct.slurm_job_ave_disk_read{NOT (slurm_job_state:running* OR slurm_job_state:pending* OR slurm_job_state:requeued* OR slurm_job_state:revoked* OR slurm_job_state:resizing*) AND $slurm_job_id AND $slurm_partition_name AND $cluster_name} by {slurm_job_id,slurm_job_id_suffix,slurm_job_state,slurm_job_exitcode,slurm_job_cpus,slurm_job_maxvm}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 500,
                                        "order_by": [
                                            {
                                                "name": "slurm_job_id",
                                                "order": "desc",
                                                "type": "group"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "title": "Job Steps",
                            "type": "query_table"
                        },
                        "id": 115526018045572,
                        "layout": {
                            "height": 4,
                            "width": 12,
                            "x": 0,
                            "y": 8
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "columns": [
                                        {
                                            "field": "status_line",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "timestamp",
                                            "width": "auto"
                                        },
                                        {
                                            "field": "content",
                                            "width": "full"
                                        }
                                    ],
                                    "query": {
                                        "data_source": "logs_stream",
                                        "indexes": [],
                                        "query_string": "source:slurm AND filename:$slurm_job_id.value AND NOT filename:slurmctld.log AND NOT filename:slurmdbd.log AND NOT filename:slurmd.log",
                                        "storage": "hot"
                                    },
                                    "response_format": "event_list"
                                }
                            ],
                            "title": "Scheduler Logs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "list_stream"
                        },
                        "id": 223726661471954,
                        "layout": {
                            "height": 3,
                            "width": 12,
                            "x": 0,
                            "y": 12
                        }
                    }
                ]
            },
            "id": 7660782513636841,
            "layout": {
                "height": 16,
                "width": 12,
                "x": 0,
                "y": 7
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Compute",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.partition.node.total{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total Nodes",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 7281262916809749,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "(query1 / query2) * 100",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.partition.node.allocated{$slurm_partition_name}.fill(null)"
                                        },
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:slurm.partition.node.total{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Nodes Used %",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 448276775645960,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 2,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.cpu.total{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total CPUs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1782983675948838,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 4,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.cpu.allocated{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "CPUs Allocated",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1831401667924634,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "gigabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.memory{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total Memory",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 4482823318027589,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 8,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "gigabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.alloc_mem{$slurm_partition_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Memory Allocated",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1715056339194034,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 10,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "100 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:system.cpu.idle{$cluster_name,node_type:compute} by {host}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 500,
                                        "order_by": [
                                            {
                                                "index": 0,
                                                "order": "desc",
                                                "type": "formula"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "style": {
                                "display": {
                                    "legend": "automatic",
                                    "type": "stacked"
                                },
                                "palette": "dog_classic"
                            },
                            "title": "Avg CPU Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 3040577435554214,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 0,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "1 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:system.mem.pct_usable{$cluster_name,node_type:compute} by {host}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 100,
                                        "order_by": [
                                            {
                                                "index": 0,
                                                "order": "desc",
                                                "type": "formula"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "style": {
                                "display": {
                                    "legend": "automatic",
                                    "type": "stacked"
                                },
                                "palette": "dog_classic"
                            },
                            "title": "Avg Memory Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 6468344680853863,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 4,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:system.disk.utilized{$cluster_name,node_type:compute} by {device}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 10,
                                        "order_by": [
                                            {
                                                "index": 0,
                                                "order": "desc",
                                                "type": "formula"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "style": {
                                "display": {
                                    "legend": "automatic",
                                    "type": "stacked"
                                },
                                "palette": "dog_classic"
                            },
                            "title": "Disk Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 8511289288540966,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 8,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "100 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:system.cpu.idle{$cluster_name,node_type:compute} by {host}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": false,
                            "title": "CPU Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 8672650648128302,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 0,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "1 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:system.mem.pct_usable{$cluster_name,node_type:compute} by {host}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Memory Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 4194662812200798,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 4,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:system.disk.utilized{$cluster_name,node_type:compute} by {device}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Disk Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 39553724106259,
                        "layout": {
                            "height": 3,
                            "width": 4,
                            "x": 8,
                            "y": 4
                        }
                    }
                ]
            },
            "id": 1932494408739557,
            "layout": {
                "height": 8,
                "width": 12,
                "x": 0,
                "y": 23
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "PFS (Lustre)",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "gigabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.data_write_bytes{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            },
                            "title": "Client Bytes Written",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1787404822177939,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "gigabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.data_read_bytes{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "timeseries_background": {
                                "type": "area",
                                "yaxis": {
                                    "include_zero": true
                                }
                            },
                            "title": "Client Bytes Read",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 1129423141052074,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 2,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.file_server_disk_throughput_utilization{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "timeseries_background": {
                                "type": "bars",
                                "yaxis": {}
                            },
                            "title": "Disk Throughput Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 3508668673413328,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 4,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.network_throughput_utilization{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "timeseries_background": {
                                "type": "bars",
                                "yaxis": {}
                            },
                            "title": "Network Throughput Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 8008413974419530,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1 / (1 - (query2 / 100))",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                },
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "terabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:aws.fsx.free_data_storage_capacity{filesystemid:fs-006428851a26a469a}.as_count()"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:aws.fsx.storage_capacity_utilization{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total Data Capacity",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 3339819294704791,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 8,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:aws.fsx.cpuutilization{filesystemid:fs-006428851a26a469a}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "MDS CPU Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 3628826464286154,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 10,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.file_server_disk_throughput_utilization{filesystemid:fs-006428851a26a469a} by {fileserver,filesystemid}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "blue"
                                    }
                                }
                            ],
                            "show_legend": false,
                            "title": "Disk Throughput Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 7375062515775150,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:aws.fsx.network_throughput_utilization{filesystemid:fs-006428851a26a469a} by {fileserver,filesystemid}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "blue"
                                    }
                                }
                            ],
                            "show_legend": false,
                            "title": "Network Throughput Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 7610353287042487,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "has_search_bar": "auto",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "Available",
                                            "cell_display_mode": "bar",
                                            "formula": "query2",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                }
                                            }
                                        },
                                        {
                                            "alias": "Used",
                                            "cell_display_mode": "bar",
                                            "formula": "query2 * (query1 / 100)",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                }
                                            },
                                            "style": {
                                                "palette": "warm"
                                            }
                                        },
                                        {
                                            "alias": "Total",
                                            "cell_display_mode": "bar",
                                            "formula": "query2 / (1 - (query1 / 100))",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                }
                                            },
                                            "style": {
                                                "palette": "warm"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:aws.fsx.free_data_storage_capacity{filesystemid:fs-006428851a26a469a} by {filesystemid,name}.as_count()"
                                        },
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:aws.fsx.storage_capacity_utilization{filesystemid:fs-006428851a26a469a} by {filesystemid,name}"
                                        },
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:aws.fsx.storage_capacity_utilization{filesystemid:fs-006428851a26a469a} by {filesystemid,name}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 500,
                                        "order_by": [
                                            {
                                                "index": 0,
                                                "order": "desc",
                                                "type": "formula"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "title": "Storage",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 6627813836954999,
                        "layout": {
                            "height": 2,
                            "width": 12,
                            "x": 0,
                            "y": 4
                        }
                    }
                ]
            },
            "id": 2111601755143500,
            "layout": {
                "height": 7,
                "is_column_break": true,
                "width": 12,
                "x": 0,
                "y": 0
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Accelerators (GPU)",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.gpu_total{$cluster_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total GPUs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 7163473669140842,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:slurm.node.gpu_used{$cluster_name}.fill(null)"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "GPUs Allocated",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 5277291494158396,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 2,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "(default_zero(query1) / default_zero(query2)) * 100",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.core.usage{$cluster_name}"
                                        },
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gpu.core.limit{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Core Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 6574374363088146,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 4,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 1,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "(query1 / query2) * 100",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.memory.usage{$cluster_name}"
                                        },
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gpu.memory.limit{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Memory Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 2789742191098382,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "last",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:gpu.power.usage{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Power Usage",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 105695707952697,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 8,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.temperature{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "timeseries_background": {
                                "type": "area"
                            },
                            "title": "Avg Temperature",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 4140478516858340,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 10,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "(default_zero(query1) / default_zero(query2)) * 100",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.core.usage{$cluster_name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gpu.core.limit{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "blue"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Core Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2147958160533679,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "(default_zero(query1) / default_zero(query2)) * 100",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "percent"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.memory.usage{$cluster_name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gpu.memory.limit{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "blue"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Memory Utilization",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2339781419434409,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "default_zero(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.power.usage{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Power Usage",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 801626074443524,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.temperature{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Temperature",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 5046855760520192,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 4
                        }
                    },
                    {
                        "definition": {
                            "has_search_bar": "auto",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "Power Usage",
                                            "cell_display_mode": "bar",
                                            "formula": "default_zero(query1)",
                                            "number_format": {
                                                "precision": 0
                                            }
                                        },
                                        {
                                            "alias": "SM Active %",
                                            "cell_display_mode": "bar",
                                            "formula": "default_zero(query4)"
                                        },
                                        {
                                            "alias": "Graphic Engine Active %",
                                            "cell_display_mode": "bar",
                                            "formula": "default_zero(query5)",
                                            "number_format": {
                                                "precision": 0
                                            }
                                        },
                                        {
                                            "alias": "Core Usage",
                                            "cell_display_mode": "bar",
                                            "formula": "default_zero(query3)",
                                            "number_format": {
                                                "precision": 0
                                            }
                                        },
                                        {
                                            "alias": "Memory Usage",
                                            "cell_display_mode": "bar",
                                            "formula": "default_zero(query7)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gpu.power.usage{$cluster_name,gpu_host:true} by {host,gpu_device}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:gpu.sm_active{$cluster_name,gpu_host:true} by {host,gpu_device}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query5",
                                            "query": "avg:gpu.gr_engine_active{$cluster_name,gpu_host:true} by {host,gpu_device}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:gpu.core.usage{$cluster_name,gpu_host:true} by {host,gpu_device}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query7",
                                            "query": "avg:gpu.memory.usage{$cluster_name,gpu_host:true} by {host,gpu_device}"
                                        }
                                    ],
                                    "response_format": "scalar",
                                    "sort": {
                                        "count": 500,
                                        "order_by": [
                                            {
                                                "name": "host",
                                                "order": "asc",
                                                "type": "group"
                                            }
                                        ]
                                    }
                                }
                            ],
                            "title": "GPUs",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 7362502762466417,
                        "layout": {
                            "height": 3,
                            "width": 12,
                            "x": 0,
                            "y": 7
                        }
                    }
                ]
            },
            "id": 4057082342036677,
            "layout": {
                "height": 11,
                "width": 12,
                "x": 0,
                "y": 7
            }
        },
        {
            "definition": {
                "background_color": "vivid_purple",
                "layout_type": "ordered",
                "show_title": true,
                "title": "Network (EFA)",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1 + query2",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "megabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:system.net.bytes_rcvd{$cluster_name}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:system.net.bytes_sent{$cluster_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Sys.Net Throughput",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 4245666674516411,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 0,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "megabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.rx_bytes.count{$cluster_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "EFA Data Received",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 7494978240260987,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 2,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit_scale": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "megabyte"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.tx_bytes.count{$cluster_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "EFA Data Sent",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 8075867910930504,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 4,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.rx_drops.count{$cluster_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "EFA Dropped Packets",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 3127403755779913,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 6,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.rdma_read_bytes.count{$cluster_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total RDMA Reads",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 6006249186504326,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 8,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 0,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.rdma_write_bytes.count{$cluster_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total RDMA Writes",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 4334846751908965,
                        "layout": {
                            "height": 1,
                            "width": 2,
                            "x": 10,
                            "y": 0
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:system.net.bytes_rcvd{$cluster_name} by {host}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "blue"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "0 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:system.net.bytes_sent{$cluster_name} by {host}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "red"
                                    }
                                }
                            ],
                            "show_legend": false,
                            "title": "System.Net Throughput",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2095895519038815,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 0,
                            "y": 1
                        }
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                }
                                            }
                                        },
                                        {
                                            "formula": "-1 * query2",
                                            "number_format": {
                                                "unit": {
                                                    "type": "canonical_unit",
                                                    "unit_name": "byte_in_binary_bytes_family"
                                                }
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:infiniband.rdma.rx_bytes.count{$cluster_name} by {host}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:infiniband.rdma.tx_bytes.count{$cluster_name} by {host}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "order_by": "values",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "EFA Traffic",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 8740794486861310,
                        "layout": {
                            "height": 3,
                            "width": 6,
                            "x": 6,
                            "y": 1
                        }
                    }
                ]
            },
            "id": 7044903447088330,
            "layout": {
                "height": 5,
                "width": 12,
                "x": 0,
                "y": 18
            }
        }
    ]
}