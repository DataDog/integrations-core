name: Test platform integrations

on:
  workflow_call:
    inputs:
      repo:
        required: true
        type: string

      python-version:
        required: false
        default: ""
        type: string
      standard:
        required: false
        default: false
        type: boolean
      latest:
        required: false
        default: false
        type: boolean
      minimum-base-package:
        required: false
        default: false
        type: boolean
      test-py2:
        required: false
        default: false
        type: boolean
      test-py3:
        required: false
        default: true
        type: boolean
      agent-image:
        required: false
        default: ""
        type: string
      agent-image-py2:
        required: false
        default: ""
        type: string
      agent-image-windows:
        required: false
        default: ""
        type: string
      agent-image-windows-py2:
        required: false
        default: ""
        type: string

jobs:
  jafd4d40:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: Citrix Hypervisor
      target: citrix_hypervisor
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  j26f9a18:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: Cloudera
      target: cloudera
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  j4131274:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: Cloud Foundry API
      target: cloud_foundry_api
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  jc4fef15:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: ESXi
      target: esxi
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  j88ddb5b:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: OpenStack
      target: openstack
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  j65171af:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: OpenStack Controller
      target: openstack_controller
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  je68b3b9:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: Teleport
      target: teleport
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  j269c8a5:
    uses: ./.github/workflows/test-target.yml
    with:
      job-name: vSphere
      target: vsphere
      platform: linux
      runner: '["ubuntu-22.04"]'
      repo: "${{ inputs.repo }}"
      python-version: "${{ inputs.python-version }}"
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      agent-image: "${{ inputs.agent-image }}"
      agent-image-py2: "${{ inputs.agent-image-py2 }}"
      agent-image-windows: "${{ inputs.agent-image-windows }}"
      agent-image-windows-py2: "${{ inputs.agent-image-windows-py2 }}"
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
    secrets: inherit
  