name: Test all

on:
  workflow_call:
    inputs:
      repo:
        required: true
        type: string

      python-version:
        required: false
        default: ""
        type: string
      standard:
        required: false
        default: false
        type: boolean
      latest:
        required: false
        default: false
        type: boolean
      minimum-base-package:
        required: false
        default: false
        type: boolean
      test-py2:
        required: false
        default: false
        type: boolean
      test-py3:
        required: false
        default: true
        type: boolean
      agent-image:
        required: false
        default: ""
        type: string
      agent-image-py2:
        required: false
        default: ""
        type: string
      agent-image-windows:
        required: false
        default: ""
        type: string
      agent-image-windows-py2:
        required: false
        default: ""
        type: string
      pytest-args:
        description: "Arguments to pass to pytest"
        required: false
        type: string
        default: ""
      skip-ddev-tests:
        required: false
        default: false
        type: boolean

jobs:
  ddev-on-linux:
    uses: ./.github/workflows/test-all-ddev-on-linux.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  ddev-on-windows:
    uses: ./.github/workflows/test-all-ddev-on-windows.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-base-on-linux:
    uses: ./.github/workflows/test-all-datadog-checks-base-on-linux.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-base-on-windows:
    uses: ./.github/workflows/test-all-datadog-checks-base-on-windows.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-dev-on-linux:
    uses: ./.github/workflows/test-all-datadog-checks-dev-on-linux.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-dev-on-windows:
    uses: ./.github/workflows/test-all-datadog-checks-dev-on-windows.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-downloader-on-linux:
    uses: ./.github/workflows/test-all-datadog-checks-downloader-on-linux.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  datadog-checks-downloader-on-windows:
    uses: ./.github/workflows/test-all-datadog-checks-downloader-on-windows.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  active-directory:
    uses: ./.github/workflows/test-all-active-directory.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  activemq:
    uses: ./.github/workflows/test-all-activemq.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  activemq-xml:
    uses: ./.github/workflows/test-all-activemq-xml.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  aerospike:
    uses: ./.github/workflows/test-all-aerospike.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  airflow:
    uses: ./.github/workflows/test-all-airflow.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  amazon-kafka:
    uses: ./.github/workflows/test-all-amazon-kafka.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  ambari:
    uses: ./.github/workflows/test-all-ambari.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  apache:
    uses: ./.github/workflows/test-all-apache.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  appgate-sdp:
    uses: ./.github/workflows/test-all-appgate-sdp.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  arangodb:
    uses: ./.github/workflows/test-all-arangodb.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  argo-rollouts:
    uses: ./.github/workflows/test-all-argo-rollouts.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
  argo-workflows:
    uses: ./.github/workflows/test-all-argo-workflows.yml
    with:
      repo: ${{ inputs.repo }}
      python-version: ${{ inputs.python-version }}
      standard: ${{ inputs.standard }}
      latest: ${{ inputs.latest }}
      minimum-base-package: ${{ inputs.minimum-base-package }}
      test-py2: ${{ inputs.test-py2 }}
      test-py3: ${{ inputs.test-py3 }}
      agent-image: ${{ inputs.agent-image }}
      agent-image-py2: ${{ inputs.agent-image-py2 }}
      agent-image-windows: ${{ inputs.agent-image-windows }}
      agent-image-windows-py2: ${{ inputs.agent-image-windows-py2 }}
      pytest-args: ${{ inputs.pytest-args }}
      skip-ddev-tests: ${{ inputs.skip-ddev-tests }}
