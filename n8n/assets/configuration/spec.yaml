name: n8n
files:
- name: n8n.yaml
  options:
  - template: init_config
    options:
    - template: init_config/default
  - template: instances
    options:
    - template: instances/openmetrics
      overrides:
        openmetrics_endpoint.required: true
        openmetrics_endpoint.hidden: false
        openmetrics_endpoint.display_priority: 1
        openmetrics_endpoint.value.example: http://localhost:5678
        openmetrics_endpoint.description: |
          Endpoint exposing the n8n's metrics in the OpenMetrics format. For more information, refer to:
          https://docs.n8n.io/hosting/logging-monitoring/monitoring/ 
          https://docs.n8n.io/hosting/configuration/environment-variables/endpoints/
        raw_metric_prefix.description: |
          The prefix prepended to all metrics from n8n.
          If not set, the default prefix n8n is used.
          If you are using a custom prefix in n8n through N8N_METRICS_PREFIX, you need to set it here.
        raw_metric_prefix.value:
          display_default: n8n
          type: string
          example: n8n
        raw_metric_prefix.hidden: false
    - name: server_port
      description: |
        The port exposing the HTTP endpoint of the n8n API.
      value:
        display_default: 5678
        type: integer
  - template: logs
    example:
    - type: file
      path: /var/log/n8n/*.log
      source: n8n
      service: <SERVICE>
    - type: docker
      source: n8n
      service: <SERVICE>
