steps:
# Newer versions of Windows require this for full use of psutil.
# See: https://github.com/giampaolo/psutil/issues/351
- script: diskperf -y
  displayName: 'Enable disk performance counters'
# In Python 2 we have to install all packages into hatch envs. This results in long paths that default windows cannot handle.
# TODO: remove this when we remove Python 2
# https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation?tabs=powershell
- script: powershell New-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" -Name "LongPathsEnabled" -Value 1 -PropertyType DWORD -Force
  displayName: 'Increase max file path length'
