{
  "title": "MongoDB - Overview",
  "author_name": "Datadog",
  "description": "This dashboard provides a high-level overview of your MongoDB deployment so you can quickly identify potential slowdowns and resource limitations.\n\n The metrics that are fetched from each member depend on its role in the cluster. For example, replication lag is fetched from the primary for all members of the replica set. This means you need to configure one integration instance for each mongod service running in your cluster.\n\nIn sharded environment, you need one additional integration instance pointed to a mongos proxy.\n\nRefer to the following resources for more information:\n\n- [How to monitor MongoDB performance (WiredTiger)](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-wiredtiger/) \n\n- [How to monitor MongoDB performance (MMAP)](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-mmap/)\n\n- [Collecting MongoDB metrics and statistics](https://www.datadoghq.com/blog/collecting-mongodb-metrics-and-statistics/)\n\n- [How to monitor MongoDB performance with Datadog](https://www.datadoghq.com/blog/monitor-mongodb-performance-with-datadog/)\n\n- [Datadog’s MongoDB integration docs](https://docs.datadoghq.com/integrations/mongo/#pagetitle)",
  "widgets": [
    {
      "id": 0,
      "definition": {
        "title": "About MongoDB",
        "title_align": "left",
        "type": "group",
        "banner_img": "/static/images/integration_dashboard/mongodb_hero_1.png",
        "show_title": false,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7601198205415224,
            "definition": {
              "type": "note",
              "content": "This dashboard provides a high-level overview of your MongoDB deployment so you can quickly identify potential slowdowns and resource limitations.\n\n The metrics that are fetched from each member depend on its role in the cluster. For example, replication lag is fetched from the primary for all members of the replica set. This means you need to configure one integration instance for each mongod service running in your cluster.\n\nIn sharded environment, you need one additional integration instance pointed to a mongos proxy.",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 7939246017097054,
            "definition": {
              "type": "note",
              "content": "**Refer to the following resources for more information**\n\n- [How to monitor MongoDB performance (WiredTiger)](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-wiredtiger/) \n\n- [How to monitor MongoDB performance (MMAP)](https://www.datadoghq.com/blog/monitoring-mongodb-performance-metrics-mmap/)\n\n- [Collecting MongoDB metrics and statistics](https://www.datadoghq.com/blog/collecting-mongodb-metrics-and-statistics/)\n\n- [How to monitor MongoDB performance with Datadog](https://www.datadoghq.com/blog/monitor-mongodb-performance-with-datadog/)\n\n- [Datadog’s MongoDB integration docs](https://docs.datadoghq.com/integrations/mongo/#pagetitle)",
              "background_color": "transparent",
              "font_size": "12",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 5
      }
    },
    {
      "id": 1,
      "definition": {
        "title": "Overview",
        "title_align": "left",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8526692107156452,
            "definition": {
              "title": "Averaged uptime",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:mongodb.uptime{$scope,$replset_name}.rollup(avg, 60)",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "last"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 8541262705113204,
            "definition": {
              "title": "Healthy members",
              "title_size": "13",
              "title_align": "center",
              "time": {
                "live_span": "10m"
              },
              "type": "check_status",
              "check": "mongodb.can_connect",
              "grouping": "cluster",
              "group_by": [],
              "tags": []
            },
            "layout": {
              "x": 3,
              "y": 0,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 28,
            "definition": {
              "title": "Shards count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query2"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.replset.health{sharding_cluster_role:shardsvr}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 8520979917822364,
            "definition": {
              "title": "Primary count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.replset.health{sharding_cluster_role:shardsvr,replset_state:primary}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 2,
              "y": 2,
              "width": 1,
              "height": 2
            }
          },
          {
            "id": 29,
            "definition": {
              "title": "Secondary count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.replset.health{sharding_cluster_role:shardsvr,replset_state:secondary}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 2,
              "width": 1,
              "height": 2
            }
          },
          {
            "id": 30,
            "definition": {
              "title": "Configsvr count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query2"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.replset.health{sharding_cluster_role:configsvr}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "max"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 4,
              "y": 2,
              "width": 2,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 5
      }
    },
    {
      "id": 2,
      "definition": {
        "title": "Replication",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_purple",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 13,
            "definition": {
              "title": "Oplog usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query4",
                      "alias": "oplog log size"
                    },
                    {
                      "formula": "query6",
                      "alias": "oplog used size"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:mongodb.oplog.logsizemb{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "avg:mongodb.oplog.usedsizemb{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query6"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 5,
              "height": 4
            }
          },
          {
            "id": 12,
            "definition": {
              "title": "Maximum lag per replica set",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "on_right_yaxis": false,
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "max:mongodb.replset.optime_lag{$scope,$replset_name} by {replset_name}.fill(zero).rollup(avg, 15)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 5,
              "y": 0,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 14,
            "definition": {
              "type": "note",
              "content": "The replication lag metric is fetched from the primary for all members of the replica set. If the graph is empty, make sure you're using Agent 7.24+/6.24+ and that every member of your cluster is monitored.\n\nYou can also use `mongodb.optime.replicationlag` on older Agent versions. This metric is fetched from secondaries.",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": false
            },
            "layout": {
              "x": 10,
              "y": 0,
              "width": 2,
              "height": 4
            }
          },
          {
            "id": 11,
            "definition": {
              "title": "Maximum lag per replica set",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 100,
                        "order": "desc"
                      }
                    }
                  ],
                  "conditional_formats": [
                    {
                      "custom_bg_color": "#f9e0ff",
                      "comparator": ">",
                      "palette": "custom_bg",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "max:mongodb.replset.optime_lag{$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "last"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 5,
              "y": 2,
              "width": 5,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 5,
        "width": 12,
        "height": 5
      }
    },
    {
      "id": 3,
      "definition": {
        "title": "Resource Utilization",
        "title_align": "left",
        "type": "group",
        "background_color": "vivid_blue",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 21,
            "definition": {
              "type": "note",
              "content": "This metric can help you understand the load and capacity requirements of your cluster.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "right"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 22,
            "definition": {
              "title": "Percentage of client connections used (%)",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "100 * exclude_null(query1) / (exclude_null(query1) + exclude_null(query2))"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:mongodb.connections.current{*,*,$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:mongodb.connections.available{*,*,$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 2,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 26,
            "definition": {
              "title": "Average memory usage",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Memory used"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:mongodb.mem.resident{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 27,
            "definition": {
              "type": "note",
              "content": "Amount of RAM used by the mongo process. This value tends to grow during normal use. In dedicated database servers, it tends to approach the total amount of system memory.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "show_tick": true,
              "tick_pos": "25%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 10,
              "y": 0,
              "width": 2,
              "height": 4
            }
          },
          {
            "id": 24,
            "definition": {
              "type": "note",
              "content": "This metric can spike due to poor server performance, which can be caused by limited memory or growing data sets. In containerized environments, you may want to group `by {pod_name}` instead.",
              "background_color": "blue",
              "font_size": "14",
              "text_align": "left",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "right"
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 25,
            "definition": {
              "title": "Number of page faults per host",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_size": "0",
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query3"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:mongodb.extra_info.page_faultsps{$scope,$replset_name} by {host}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "warm"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 2,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 23,
            "definition": {
              "title": "Data size per replica set",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "on_right_yaxis": false,
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:mongodb.stats.datasize{$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 6,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 10,
        "width": 12,
        "height": 5
      }
    },
    {
      "id": 4,
      "definition": {
        "title": "Throughput",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_green",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 15,
            "definition": {
              "title": "Read requests per second",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query4",
                      "alias": "Getmore Operations"
                    },
                    {
                      "formula": "query6",
                      "alias": "Queries"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:mongodb.opcounters.getmoreps{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "sum:mongodb.opcounters.queryps{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query6"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 16,
            "definition": {
              "title": "Network I/O",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Received network traffic"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:mongodb.network.bytesinps{*,*,$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Sent network traffic"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:mongodb.network.bytesoutps{*,*,$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 17,
            "definition": {
              "title": "Write requests per second",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query5",
                      "alias": "Delete operations"
                    },
                    {
                      "formula": "query7",
                      "alias": "Insert operations "
                    },
                    {
                      "formula": "query9",
                      "alias": "Update operations"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:mongodb.opcounters.deleteps{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query5"
                    },
                    {
                      "query": "sum:mongodb.opcounters.insertps{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query7"
                    },
                    {
                      "query": "sum:mongodb.opcounters.updateps{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query9"
                    }
                  ],
                  "style": {
                    "palette": "green",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 18,
            "definition": {
              "title": "Query operations per second",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query8",
                      "alias": "Total queries"
                    },
                    {
                      "formula": "query10",
                      "alias": "Delete operations"
                    },
                    {
                      "formula": "query12",
                      "alias": "Insert operations"
                    },
                    {
                      "formula": "query14",
                      "alias": "Update operations"
                    },
                    {
                      "formula": "query16",
                      "alias": "Getmore operations"
                    },
                    {
                      "formula": "query18",
                      "alias": "Commands"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:mongodb.opcounters.queryps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query8"
                    },
                    {
                      "query": "sum:mongodb.opcounters.deleteps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query10"
                    },
                    {
                      "query": "sum:mongodb.opcounters.insertps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query12"
                    },
                    {
                      "query": "sum:mongodb.opcounters.updateps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query14"
                    },
                    {
                      "query": "sum:mongodb.opcounters.getmoreps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query16"
                    },
                    {
                      "query": "sum:mongodb.opcounters.commandps{$scope,$replset_name}.fill(zero)",
                      "data_source": "metrics",
                      "name": "query18"
                    }
                  ],
                  "style": {
                    "palette": "cool",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 5
      }
    },
    {
      "id": 5,
      "definition": {
        "title": "Most Used Replica Sets",
        "title_align": "center",
        "type": "group",
        "background_color": "green",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 19,
            "definition": {
              "title": "For reads",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_green",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.opcounters.getmoreps{$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "sum"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 20,
            "definition": {
              "title": "For writes",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_green",
                      "value": 0
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.opcounters.deleteps{$scope,$replset_name} by {replset_name}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "sum"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 5
      }
    },
    {
      "id": 2670232594477336,
      "definition": {
        "title": "Latencies",
        "type": "group",
        "background_color": "blue",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7597459771052076,
            "definition": {
              "title": "Command Latency",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Command Latency",
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "max:mongodb.oplatencies.commands.latency{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 8717181650202404,
            "definition": {
              "title": "Read Latency",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Read Latency",
                      "formula": "query2"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "max:mongodb.oplatencies.reads.latency{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 5546751508710680,
            "definition": {
              "title": "Write Latency",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Write Latency",
                      "formula": "query3"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "max:mongodb.oplatencies.writes.latency{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ]
            },
            "layout": {
              "x": 8,
              "y": 0,
              "width": 4,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 20,
        "width": 12,
        "height": 4,
        "is_column_break": true
      }
    },
    {
      "id": 6,
      "definition": {
        "title": "Sharding Stats",
        "title_align": "left",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 31,
            "definition": {
              "title": "Count of current sessions opened to the sharded cluster.",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Session Count"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:mongodb.sessions.count{$scope,$replset_name}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 32,
            "definition": {
              "title": "Total chunks count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.chunks.total{$scope,$replset_name}.rollup(avg, 60).fill(zero)",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "last"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "chk",
              "precision": 2
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 33,
            "definition": {
              "title": "Jumbo chunks count",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:mongodb.chunks.jumbo{$scope,$replset_name}.rollup(avg, 60).fill(zero)",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "last"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 0
            },
            "layout": {
              "x": 3,
              "y": 3,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 34,
            "definition": {
              "type": "note",
              "content": "Chunk count requires Agent 7.24+/6.24+ and `jumbo_chunks` set in the integration configuration directed to your 'mongos' proxy.",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": false
            },
            "layout": {
              "x": 0,
              "y": 5,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 35,
            "definition": {
              "type": "note",
              "content": "MongoDB labels a chunk as jumbo if it exceeds the specified chunk size and cannot be split. These jumbo chunks can cause performance bottlenecks as they grow, especially if the shard key value occurs with high frequency.",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": false
            },
            "layout": {
              "x": 3,
              "y": 5,
              "width": 3,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 8
      }
    },
    {
      "id": 7,
      "definition": {
        "title": "Logs",
        "title_align": "left",
        "type": "group",
        "background_color": "white",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 145205510521986,
            "definition": {
              "title": "MongoDB Logs",
              "title_size": "16",
              "title_align": "left",
              "type": "log_stream",
              "indexes": [],
              "query": "source:mongodb $scope $replset_name",
              "sort": {
                "column": "time",
                "order": "desc"
              },
              "columns": [
                "host",
                "service"
              ],
              "show_date_column": true,
              "show_message_column": true,
              "message_display": "expanded-md"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 7
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 8
      }
    }
  ],
  "template_variables": [
    {
      "name": "scope",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "replset_name",
      "prefix": "replset_name",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "is_read_only": false,
  "notify_list": [],
  "reflow_type": "fixed"
}
