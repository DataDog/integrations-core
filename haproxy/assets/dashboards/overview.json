{
  "title": "HAProxy - Overview",
  "description": "This dashboard displays an overview of your HAProxy frontend and backend servers, helping you spot issues like rising error rates or disparities between your frontend and backend traffic. For more information, see:\n\n- [Monitoring HAProxy performance metrics](https://www.datadoghq.com/blog/monitoring-haproxy-performance-metrics/)\n\n- [Using built-in and third-party tools to collect HAProxy metrics](https://www.datadoghq.com/blog/how-to-collect-haproxy-metrics/)\n\n- [Monitor HAProxy with Datadog](https://www.datadoghq.com/blog/monitor-haproxy-with-datadog/)\n\n- [Datadog's HAProxy documentation](https://docs.datadoghq.com/integrations/haproxy/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets": [
    {
      "id": 7654339181439146,
      "definition": {
        "title": "About HAProxy",
        "title_align": "left",
        "banner_img": "/static/images/integration_dashboard/haproxy_hero_1.png",
        "show_title": false,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2451661469305854,
            "definition": {
              "type": "note",
              "content": "This dashboard provides a high-level overview of your HAProxy deployment so you can quickly identify the health of your frontend, backend and proxies.\n",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6085654256880802,
            "definition": {
              "type": "note",
              "content": "**Refer to the following resources for more information**\n\n- [Official HAProxy documentation](https://www.haproxy.com/documentation/hapee/latest/onepage/)\n\n- [Available HAProxy metrics](https://docs.datadoghq.com/integrations/haproxy/?tab=host) \n\n- [Monitor HAProxy with Datadog](https://www.datadoghq.com/blog/monitor-haproxy-with-datadog/)",
              "background_color": "transparent",
              "font_size": "12",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 5
      }
    },
    {
      "id": 7586892233042790,
      "definition": {
        "title": "Overview",
        "background_color": "blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 6159692816877496,
            "definition": {
              "title": "Incoming Success Rate (non-5xx responses)",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "(query3 + query1 + query2) / (query3 + query1 + query2 + query4) * 100"
                    }
                  ],
                  "conditional_formats": [
                    {
                      "comparator": ">=",
                      "palette": "white_on_green",
                      "value": 0.95
                    },
                    {
                      "comparator": "<",
                      "palette": "white_on_yellow",
                      "value": 0.95
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.4xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query3",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.3xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.2xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.5xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query4",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "precision": 2
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 5242882886523982,
            "definition": {
              "title": "Incoming Requests Volume",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 + query3 + query2 + query4"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.4xx{*,*,$backend}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.3xx{*,*,$backend}",
                      "data_source": "metrics",
                      "name": "query3",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.2xx{*,*,$backend}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.5xx{*,*,$backend}",
                      "data_source": "metrics",
                      "name": "query4",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "precision": 2
            },
            "layout": {
              "x": 2,
              "y": 0,
              "width": 2,
              "height": 2
            }
          },
          {
            "id": 8944505110005692,
            "definition": {
              "title": "Errors by Service",
              "title_size": "16",
              "title_align": "left",
              "time": {},
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 + query2"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.4xx{*,*,$backend} by {service}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:haproxy.backend.response.5xx{*,*,$backend} by {service}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "type": "sunburst",
              "legend": {
                "type": "table"
              }
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 5
      }
    },
    {
      "id": 1149464068634540,
      "definition": {
        "title": "Frontend",
        "background_color": "vivid_purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5455162875521216,
            "definition": {
              "title": "Frontend Response codes",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "2xx",
                      "formula": "query1"
                    },
                    {
                      "alias": "1xx",
                      "formula": "query2"
                    },
                    {
                      "alias": "3xx",
                      "formula": "query3"
                    },
                    {
                      "alias": "4xx",
                      "formula": "query4"
                    },
                    {
                      "alias": "5xx",
                      "formula": "query5"
                    },
                    {
                      "alias": "other",
                      "formula": "query6"
                    }
                  ],
                  "queries": [
                    {
                      "query": "sum:haproxy.frontend.response.2xx{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:haproxy.frontend.response.1xx{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "sum:haproxy.frontend.response.3xx{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "sum:haproxy.frontend.response.4xx{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "sum:haproxy.frontend.response.5xx{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query5"
                    },
                    {
                      "query": "sum:haproxy.frontend.response.other{*,*,$frontend,$release}",
                      "data_source": "metrics",
                      "name": "query6"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "scale": "log",
                "include_zero": false
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 4
            }
          },
          {
            "id": 6952725003844530,
            "definition": {
              "type": "note",
              "content": "Keep an eye on peaks and drops to ensure continuous service availability. In the event of a traffic spike, clients might see increases in latency or even denied connections.",
              "background_color": "purple",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 2,
              "height": 4
            }
          },
          {
            "id": 5427394086713122,
            "definition": {
              "title": "2xx Frontend Responses",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.frontend.response.2xx{*,*,$frontend,$release} by {haproxy_service,release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 3995670315964778,
            "definition": {
              "title": "3xx Frontend Responses",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.frontend.response.3xx{*,*,$frontend,$release} by {haproxy_service,release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 4,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2047565335374142,
            "definition": {
              "title": "4xx Frontend Responses",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.frontend.response.4xx{*,*,$frontend,$release} by {haproxy_service,release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "orange",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6295573771843224,
            "definition": {
              "title": "5xx Frontend Responses",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.frontend.response.5xx{*,*,$frontend,$release} by {haproxy_service,release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 6,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 9
      }
    },
    {
      "id": 4593425430940950,
      "definition": {
        "title": "Logs",
        "background_color": "purple",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5685665511884118,
            "definition": {
              "title": "HAProxy Logs",
              "title_size": "16",
              "title_align": "left",
              "requests": [
                {
                  "response_format": "event_list",
                  "query": {
                    "data_source": "logs_stream",
                    "query_string": "source:*haproxy*",
                    "indexes": [],
                    "storage": "hot",
                    "sort": {
                      "order": "desc",
                      "column": "timestamp"
                    }
                  },
                  "columns": [
                    {
                      "field": "status_line",
                      "width": "auto"
                    },
                    {
                      "field": "timestamp",
                      "width": "auto"
                    },
                    {
                      "field": "host",
                      "width": "auto"
                    },
                    {
                      "field": "@service",
                      "width": "auto"
                    },
                    {
                      "field": "content",
                      "width": "compact"
                    }
                  ]
                }
              ],
              "type": "list_stream"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 8
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 9
      }
    },
    {
      "id": 7179303075000462,
      "definition": {
        "title": "Backend",
        "background_color": "vivid_orange",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 445999348982050,
            "definition": {
              "title": "Backend response codes by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "2xx",
                      "formula": "query1"
                    },
                    {
                      "alias": "1xx",
                      "formula": "query2"
                    },
                    {
                      "alias": "3xx",
                      "formula": "query3"
                    },
                    {
                      "alias": "4xx",
                      "formula": "query4"
                    },
                    {
                      "alias": "5xx",
                      "formula": "query5"
                    },
                    {
                      "alias": "other",
                      "formula": "query6"
                    }
                  ],
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.2xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:haproxy.backend.response.1xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query2"
                    },
                    {
                      "query": "sum:haproxy.backend.response.3xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query3"
                    },
                    {
                      "query": "sum:haproxy.backend.response.4xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query4"
                    },
                    {
                      "query": "sum:haproxy.backend.response.5xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query5"
                    },
                    {
                      "query": "sum:haproxy.backend.response.other{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query6"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "area"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 8,
              "height": 2
            }
          },
          {
            "id": 3090788539548118,
            "definition": {
              "title": "2xx Backend Responses by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.2xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 3565399523481428,
            "definition": {
              "title": "3xx Backend Responses by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.3xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 3,
              "y": 2,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 1863184948995790,
            "definition": {
              "type": "note",
              "content": "Ideally, all responses forwarded by HAProxy are class 2xx codes, so an unexpected surge in the number of other code classes could be a sign of trouble.\n\n\n**4xx:** HTTP client errors\n\n**5xx:** HTTP server errors",
              "background_color": "orange",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "left",
              "has_padding": true
            },
            "layout": {
              "x": 6,
              "y": 2,
              "width": 2,
              "height": 4
            }
          },
          {
            "id": 3540059407696954,
            "definition": {
              "title": "4xx Backend Responses by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.4xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "orange",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 5761243963570348,
            "definition": {
              "title": "5xx Backend Responses by Release",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:haproxy.backend.response.5xx{*,*,$backend} by {haproxy_service}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 3,
              "y": 4,
              "width": 3,
              "height": 2
            }
          },
          {
            "id": 3773616402244664,
            "definition": {
              "type": "note",
              "content": "Monitor the response times to identify latency issues before your customers are substantially impacted. \n\nConsider [creating alerts](https://www.datadoghq.com/blog/introducing-recovery-thresholds/) when your p95 response times pass acceptable thresholds.",
              "background_color": "orange",
              "font_size": "14",
              "text_align": "left",
              "vertical_align": "center",
              "show_tick": true,
              "tick_pos": "50%",
              "tick_edge": "right",
              "has_padding": true
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 2,
              "height": 3
            }
          },
          {
            "id": 5685875710364636,
            "definition": {
              "title": "Backend p99 Response Time",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "vertical",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "time": {},
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1"
                    }
                  ],
                  "queries": [
                    {
                      "query": "avg:haproxy.backend.response.time{*,*,*,*} by {release}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 2,
              "y": 6,
              "width": 6,
              "height": 3
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 10,
        "is_column_break": true
      }
    },
    {
      "id": 8133901540405098,
      "definition": {
        "title": "Pod Statistics",
        "background_color": "vivid_blue",
        "show_title": true,
        "type": "group",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 7899500601949230,
            "definition": {
              "title": "Top Resource Consumers",
              "type": "query_table",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "CPU Cores",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      },
                      "formula": "query1"
                    },
                    {
                      "alias": "Memory",
                      "formula": "query2"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:kubernetes.cpu.usage.total{*,*,*,*,*,*,kube_namespace:ingress-haproxy,*,short_image:haproxy,*,*,*,*} by {pod_name}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:kubernetes.memory.usage{*,*,*,*,*,*,kube_namespace:ingress-haproxy,*,short_image:haproxy,*,*,*,*} by {pod_name}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 4
            }
          },
          {
            "id": 6343835413534078,
            "definition": {
              "title": "CPU Usage by Pod",
              "show_legend": false,
              "legend_size": "0",
              "type": "timeseries",
              "requests": [
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "sum:kubernetes.cpu.usage.total{*,*,*,*,*,*,kube_namespace:ingress-haproxy,*,short_image:haproxy,*,*,*,*} by {pod_name}"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "autosmooth(query1)"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                },
                {
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "data_source": "metrics",
                      "name": "query1",
                      "query": "avg:kubernetes.cpu.limits{*,*,*,*,*,*,kube_namespace:ingress-haproxy,*,short_image:haproxy,*,*,*,*}"
                    }
                  ],
                  "formulas": [
                    {
                      "formula": "autosmooth(query1)"
                    }
                  ],
                  "style": {
                    "palette": "warm",
                    "line_type": "solid",
                    "line_width": "thick"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              }
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 4358837757947092,
            "definition": {
              "title": "Memory Usage %",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": [
                "avg",
                "min",
                "max",
                "value",
                "sum"
              ],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 / query2 * 100"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "max:kubernetes.memory.usage{team:logs,*,*,*,datacenter:us1.prod.dog,*,*,*,kube_container_name:*,short_image:envoy,*} by {release}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "avg:kubernetes.memory.limits{team:logs,*,*,*,datacenter:us1.prod.dog,*,*,*,kube_container_name:*,short_image:envoy,*} by {release}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "dog_classic",
                    "line_type": "solid",
                    "line_width": "normal"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": [
                {
                  "value": "y > 100",
                  "display_type": "error dashed"
                },
                {
                  "value": "80 < y < 100",
                  "display_type": "warning dashed"
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 6,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 9
      }
    }
  ],
  "template_variables": [
    {
      "name": "frontend",
      "prefix": "haproxy_service",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "backend",
      "prefix": "haproxy_service",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "release",
      "prefix": "release",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed"
}
