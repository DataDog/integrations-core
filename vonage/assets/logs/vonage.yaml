id: vonage
# See app_id in your integration's manifest.json file to learn more:
# https://docs.datadoghq.com/developers/integrations/check_references/#manifest-file
metric_id: vonage
# If for some reason id must be different than app_id, add the app_id in this field instead.
# If id and app_id already match, this field can be left blank.
backend_only: false
facets:
  - description: Date/Time when the message was delivered/failed to deliver.
    facetType: list
    groups:
      - Vonage
    name: date_end
    path: date_end
    source: log
    type: string
  - description: Start date for an initiated call
    facetType: list
    groups:
      - Vonage
    name: date_start
    path: date_start
    source: log
    type: double
  - facetType: list
    groups:
      - Vonage
    name: error_code
    path: error_code
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: id
    path: log_id
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: Log Level
    path: log_level
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: message
    path: message
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: product
    path: product
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: role
    path: role
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: status
    path: status
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: Threads
    path: message_thread
    source: log
    type: double
  - facetType: list
    groups:
      - Web Access
    name: URL Path
    path: http.url
    source: log
  - facetType: list
    groups:
      - Vonage
    name: URL
    path: http.url_1
    source: log
    type: string
  - facetType: list
    groups:
      - Vonage
    name: UserRole
    path: UserRole
    source: log
    type: string
pipeline:
  type: pipeline
  name: vonage_mapper
  enabled: true
  filter:
    query: "source:vonage"
  processors:
    - type: attribute-remapper
      name: Map tag `latency` to an attribute
      enabled: true
      sources:
        - latency
      sourceType: tag
      target: latency
      targetType: attribute
      preserveSource: true
      overrideOnConflict: false
    - type: attribute-remapper
      name: Map tag `product` to attribute `vonage_product`
      enabled: true
      sources:
        - product
      sourceType: tag
      target: vonage_product
      targetType: attribute
      preserveSource: true
      overrideOnConflict: false
    - type: attribute-remapper
      name: Map tag `error_code_description` to an attribute
      enabled: true
      sources:
        - error_code_description
      sourceType: tag
      target: error_code_description
      targetType: attribute
      preserveSource: true
      overrideOnConflict: false
    - type: attribute-remapper
      name: Map tag `error_code` to an attribute
      enabled: true
      sources:
        - error_code
      sourceType: tag
      target: error_code
      targetType: attribute
      preserveSource: true
      overrideOnConflict: false
