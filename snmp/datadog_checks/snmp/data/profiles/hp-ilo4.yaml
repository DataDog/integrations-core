# Profile for HP iLO4 devices.
sysobjectid: 1.3.6.1.4.1.232.9.4.11

metrics:
  # - MIB: CPQHTLH-MIB
  #   symbol:
  #     OID: 1.3.6.1.4.1.232.*
  #     name:

  # General health.

  - MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.8.1
      name: cpqHeSysUtilLifeTime
    forced_type: monotonic_count # Sent as INTEGER instead of Counter

  # Critical errors.

  - # Overall condition of the critical error log feature.
    # NOTE: other(1), ok(2), degraded(3), failed(4)
    MIB: CPQHTLH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.2.2
      name: cpqHeCritLogCondition
    forced_type: gauge # Sent as INTEGER instead of Gauge

  # Correctable memory errors tracking.

  - # Overall status of the correctable memory error log feature.
    # NOTE: other(1), notSupported(2), disabled(3), enabled(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.3.1
      name: cpqHeCorrMemLogStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Overall condition of the correctable memory error log feature.
    # NOTE: other(1), ok(2), degraded(3), failed(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.3.2
      name: cpqHeCorrMemLogCondition
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Number of correctable memory errors that have occurred.
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.3.3
      name: cpqHeCorrMemTotalErrs
    forced_type: monotonic_count # Sent as INTEGER instead of Counter

  # ASR (Automatic Server Recovery)

  - # Overall status of the ASR feature.
    # NOTE: other(1), notAvailable(2), disabled(3), enabled(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.5.1
      name: cpqHeAsrStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Whether the ASR timer passed the server Power-On Self-Test (POST).
    # NOTE: other(1), failed(2), ok(3)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.5.6
      name: cpqHeAsrPost
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Number of ASR reboots that occurred on the server since last manual reboot.
    # NOTE: -1 if not supported.
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.5.10
      name: cpqHeAsrRebootCount
    forced_type: monotonic_count # Sent as INTEGER instead of Counter

  - # Overall condition of the ASR feature.
    # NOTE: other(1), notAvailable(2), disabled(3), enabled(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.5.17
      name: cpqHeAsrCondition
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Status of the ASR network access feature.
    # NOTE: other(1), disabled(2), enabled(3)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.5.21
      name: cpqHeAsrNetworkAccessStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  # Temperature and fans.

  - # Overall condition of the thermal environment.
    # NOTE: other(1), ok(2), degraded(3), failed(4)
    MIB: CPQHTLH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.6.1
      name: cpqHeThermalCondition
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Status of temperature sensors.
    # NOTE: other(1), ok(2), degraded(3), failed(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.6.3
      name: cpqHeThermalTempStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Status of fan(s).
    # NOTE: other(1), ok(2), degraded(3), failed(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.6.4
      name: cpqHeThermalSystemFanStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Status of processor fan(s).
    # NOTE: other(1), ok(2), failed(4)
    MIB: CPQHLTH-MIB
    symbol:
      OID: 1.3.6.1.4.1.232.6.2.6.5
      name: cpqHeThermalCpuFanStatus
    forced_type: gauge # Sent as INTEGER instead of Gauge

  - # Temperator sensors.
    MIB: CPQHLTH-MIB
    table:
      OID: 1.3.6.1.4.1.232.6.2.6.8
      name: cpqHeTemperatureTable
    symbols:
      - OID: 1.3.6.1.4.1.232.6.2.6.8.1.1.4
        name: cpqHeTemperatureCelsius
      - # NOTE: other(1), ok(2), degraded(3), failed(4)
        OID: 1.3.6.1.4.1.232.6.2.6.8.1.1.6
        name: cpqHeTemperatureCondition
    forced_type: gauge # These are sent as INTEGERs instead of Gauges.
    metric_tags:
      - tag: sensor_id
        column:
          OID: 1.3.6.1.4.1.232.6.2.6.8.1.1.3
          name: cpqHeTemperatureIndex
  # TODO:
  # System utilization.
  # CPU and memory usage.
  # Network interfaces.
  # Network traffic.
  # Power supplies.
  # Storage.
  # Field-replaceable units.
