extends:
  - _dell.yaml
  - _generic-if.yaml

sysobjectid:
  - 1.3.6.1.4.1.19746.3.1.*    # EMC Data Domain
  - 1.3.6.1.4.1.19746.3.1.1    # EMC dd200
  - 1.3.6.1.4.1.19746.3.1.2    # EMC dd200Proto
  - 1.3.6.1.4.1.19746.3.1.3    # EMC dd410
  - 1.3.6.1.4.1.19746.3.1.4    # EMC dd430
  - 1.3.6.1.4.1.19746.3.1.5    # EMC dd460
  - 1.3.6.1.4.1.19746.3.1.6    # EMC dd400g
  - 1.3.6.1.4.1.19746.3.1.7    # EMC dd460g
  - 1.3.6.1.4.1.19746.3.1.8    # EMC dd560
  - 1.3.6.1.4.1.19746.3.1.9    # EMC dd560g
  - 1.3.6.1.4.1.19746.3.1.10    # EMC dd580
  - 1.3.6.1.4.1.19746.3.1.11    # EMC dd580g
  - 1.3.6.1.4.1.19746.3.1.12    # EMC dd565
  - 1.3.6.1.4.1.19746.3.1.13    # EMC dd530
  - 1.3.6.1.4.1.19746.3.1.14    # EMC dd510
  - 1.3.6.1.4.1.19746.3.1.15    # EMC dd120
  - 1.3.6.1.4.1.19746.3.1.16    # EMC dd690
  - 1.3.6.1.4.1.19746.3.1.17    # EMC dd690g
  - 1.3.6.1.4.1.19746.3.1.18    # EMC dd660
  - 1.3.6.1.4.1.19746.3.1.19    # EMC dd880
  - 1.3.6.1.4.1.19746.3.1.20    # EMC dd880g
  - 1.3.6.1.4.1.19746.3.1.21    # EMC dd610
  - 1.3.6.1.4.1.19746.3.1.22    # EMC dd630
  - 1.3.6.1.4.1.19746.3.1.23    # EMC dd140
  - 1.3.6.1.4.1.19746.3.1.24    # EMC dd670
  - 1.3.6.1.4.1.19746.3.1.25    # EMC dd860
  - 1.3.6.1.4.1.19746.3.1.26    # EMC dd860g
  - 1.3.6.1.4.1.19746.3.1.27    # EMC dd890
  - 1.3.6.1.4.1.19746.3.1.28    # EMC dd640
  - 1.3.6.1.4.1.19746.3.1.29    # EMC dd620
  - 1.3.6.1.4.1.19746.3.1.30    # EMC dd160
  - 1.3.6.1.4.1.19746.3.1.31    # EMC ddintrepid
  - 1.3.6.1.4.1.19746.3.1.32    # EMC dd4500
  - 1.3.6.1.4.1.19746.3.1.33    # EMC dd7200
  - 1.3.6.1.4.1.19746.3.1.34    # EMC ddve
  - 1.3.6.1.4.1.19746.3.1.35    # EMC dd990
  - 1.3.6.1.4.1.19746.3.1.36    # EMC dd2500
  - 1.3.6.1.4.1.19746.3.1.37    # EMC dd4200

metrics:
  - MIB: HOST-RESOURCES-MIB
    symbol:
      name: memory.total
      OID: 1.3.6.1.2.1.25.2.3.1.5.1
  - MIB: HOST-RESOURCES-MIB
    symbol:
      name: memory.used
      OID: 1.3.6.1.2.1.25.2.3.1.6.1
  - MIB: HOST-RESOURCES-MIB
    symbol:
      OID: 1.3.6.1.2.1.25.2.3.1.6.6  # hrStorageUsed.6 = Memory buffers
      name: hrMemoryBuffers
  - MIB: HOST-RESOURCES-MIB
    symbol:
      OID: 1.3.6.1.2.1.25.2.3.1.6.7  # hrStorageUsed.7 = Cached memory
      name: hrCachedMemory
#  - MIB: DATA-DOMAIN-MIB
#    symbol:
#      name: fileSystemStatus
#      OID: 1.3.6.1.4.1.19746.1.3.1.1.0
#      enum:
#        enabled: 1
#        disabled: 2
#        running: 3
#        unknown: 4
#        error: 5
#        cleaning: 6
#      TODO: enum in scalar metric is not supported yet (keep this metric and this comment in profile until it's fixed)
#  - MIB: DATA-DOMAIN-MIB
#    symbol:
#      name: fileSystemVirtualSpace
#      OID: 1.3.6.1.4.1.19746.1.3.1.2.0
# TODO: octet string cannot be collected
#  - MIB: DATA-DOMAIN-MIB
#    symbol:
#      name: fileSystemUpTime
#      OID: 1.3.6.1.4.1.19746.1.3.1.3.0
#      format: TODO_handle_conversion_to_one
#  - MIB: DATA-DOMAIN-MIB
#    symbol:
#      name: fileSystemStatusMessage
#      OID: 1.3.6.1.4.1.19746.1.3.1.4.0
#      format: TODO_handle_conversion_to_one
  - MIB: DATA-DOMAIN-MIB
    table:
      name: powerModuleTable
      OID: 1.3.6.1.4.1.19746.1.1.1.1.1
    symbols:
      - name: dell.data_domain.powerModule
        constant_value_one: true
    metric_tags:
      - column:
          name: powerModuleDescription
          OID: 1.3.6.1.4.1.19746.1.1.1.1.1.1.3
        tag: dell_data_domain_power_module_description
      - column:
          OID: 1.3.6.1.4.1.19746.1.1.1.1.1.1.4
          name: powerModuleStatus
        tag: dell_data_domain_power_module_status
        mapping:
          0: absent
          1: ok
          2: failed
          3: faulty
          4: acnone
          99: unknown
  - MIB: DATA-DOMAIN-MIB
    table:
      name: temperatureSensorTable
      OID: 1.3.6.1.4.1.19746.1.1.2.1.1
    symbols:
      - name: dell.data_domain.tempSensorCurrentValue
        OID: 1.3.6.1.4.1.19746.1.1.2.1.1.1.5
    metric_tags:
      - column:
          name: tempSensorDescription
          OID: 1.3.6.1.4.1.19746.1.1.2.1.1.1.4
        tag: dell_data_domain_temp_sensor_description
      - column:
          OID: 1.3.6.1.4.1.19746.1.1.2.1.1.1.6
          name: tempSensorStatus
        tag: dell_data_domain_temp_sensor_status
        mapping:
          0: failed
          1: ok
          2: notfound
          3: overheat_warning
          4: overheat_critical
  - MIB: DATA-DOMAIN-MIB
    table:
      name: fanPropertiesTable
      OID: 1.3.6.1.4.1.19746.1.1.3.1.1
    symbols:
      - name: dell.data_domain.fanProperties
        constant_value_one: true
    metric_tags:
      - column:
          name: fanDescription
          OID: 1.3.6.1.4.1.19746.1.1.3.1.1.1.4
        tag: dell_data_domain_fan_description
      - column:
          OID: 1.3.6.1.4.1.19746.1.1.3.1.1.1.5
          name: fanLevel
        tag: dell_data_domain_fan_level
        mapping:
          0: unknown
          1: low
          2: medium
          3: high
      - column:
          OID: 1.3.6.1.4.1.19746.1.1.3.1.1.1.6
          name: fanStatus
        tag: dell_data_domain_fan_status
        mapping:
          0: notfound
          1: ok
          2: fail
  - MIB: DATA-DOMAIN-MIB
    table:
      name: fileSystemSpaceTable
      OID: 1.3.6.1.4.1.19746.1.3.2.1
    symbols:
#      - name: fileSystemSpaceSize
#        OID: 1.3.6.1.4.1.19746.1.3.2.1.1.4
#      - name: fileSystemSpaceUsed
#        OID: 1.3.6.1.4.1.19746.1.3.2.1.1.5
#      - name: fileSystemSpaceAvail
#        OID: 1.3.6.1.4.1.19746.1.3.2.1.1.6
      - name: dell.data_domain.fileSystemPercentUsed
        OID: 1.3.6.1.4.1.19746.1.3.2.1.1.7
#      - name: fileSystemSpaceCleanable
#        OID: 1.3.6.1.4.1.19746.1.3.2.1.1.8
# TODO: octet strings cannot be collected
    metric_tags:
      - column:
          name: fileSystemResourceName
          OID: 1.3.6.1.4.1.19746.1.3.2.1.1.3
        tag: dell_data_domain_file_system_resource_name
      - column:
          name: fileSystemResourceTier
          OID: 1.3.6.1.4.1.19746.1.3.2.1.1.9
        tag: dell_data_domain_file_system_resource_tier
#  - MIB: DATA-DOMAIN-MIB
#    table:
#      name: fileSystemCompressionTable
#      OID: 1.3.6.1.4.1.19746.1.3.3.1
#    symbols:
#      - name: fileSystemCompressionStartTime
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.3
#      - name: fileSystemCompressionEndTime
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.4
#      - name: fileSystemPreCompressionSize
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.5
#      - name: fileSystemPostCompressionSize
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.6
#      - name: fileSystemGlobalCompressionFactor
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.7
#      - name: fileSystemLocalCompressionFactor
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.8
#      - name: fileSystemTotalCompressionFactor
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.9
#      - name: fileSystemReductionPercent
#        OID: 1.3.6.1.4.1.19746.1.3.3.1.1.11
#    metric_tags:
#      - column:
#          name: fileSystemCompressionIndex
#          OID: 1.3.6.1.4.1.19746.1.3.3.1.1.1
#        tag: data_domain_file_system_compression_index
# TODO: octet strings cannot be collected
  - MIB: DATA-DOMAIN-MIB
    table:
      name: systemStatsTable
      OID: 1.3.6.1.4.1.19746.1.5.1.1
    symbols:
      - name: cpu.usage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.2
      - name: dell.data_domain.cpuMaxPercentageBusy
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.3
      - name: dell.data_domain.nfsOpsPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.4
      - name: dell.data_domain.nfsIdlePercentage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.5
      - name: dell.data_domain.nfsProcPercentage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.6
      - name: dell.data_domain.nfsSendPercentage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.7
      - name: dell.data_domain.nfsReceivePercentage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.8
      - name: dell.data_domain.cifsOpsPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.9
      - name: dell.data_domain.diskReadKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.10
      - name: dell.data_domain.diskWriteKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.11
      - name: dell.data_domain.diskBusyPercentage
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.12
      - name: dell.data_domain.nvramReadKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.13
      - name: dell.data_domain.nvramWriteKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.14
      - name: dell.data_domain.replInKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.15
      - name: dell.data_domain.relOutKBytesPerSecond
        OID: 1.3.6.1.4.1.19746.1.5.1.1.1.16
    metric_tags:
      - column:
          OID: 1.3.6.1.4.1.19746.1.5.1.1.1.1
          name: systemStatsIndex
        tag: dell_data_domain_system_stats_index
  - MIB: DATA-DOMAIN-MIB
    table:
      name: diskPropertiesTable
      OID: 1.3.6.1.4.1.19746.1.6.1.1
    symbols:
      - name: dell.data_domain.diskProperties
        constant_value_one: true
    metric_tags:
      - column:
          name: diskPropEnclosureID
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.1
        tag: dell_data_domain_disk_prop_enclosure_id
      - column:
          name: diskPropIndex
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.2
        tag: dell_data_domain_disk_prop_index
      - column:
          name: diskModel
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.4
        tag: dell_data_domain_disk_model
      - column:
          name: diskFirmwareVersion
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.5
        tag: dell_data_domain_disk_firmware_version
      - column:
          name: diskSerialNumber
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.6
        tag: dell_data_domain_disk_serial_number
      - column:
          name: diskCapacity
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.7
        tag: dell_data_domain_disk_capacity
      - column:
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.8
          name: diskPropState
        tag: dell_data_domain_disk_prop_state
        mapping:
          1: ok
          2: unknown
          3: absent
          4: failed
          5: spare
          6: available
      - column:
          OID: 1.3.6.1.4.1.19746.1.6.1.1.1.9
          name: diskPack
        tag: dell_data_domain_disk_pack
        mapping:
          0: notapplicable
          1: pack1
          2: pack2
          3: pack3
          4: pack4
  - MIB: DATA-DOMAIN-MIB
    table:
      name: diskPerformanceTable
      OID: 1.3.6.1.4.1.19746.1.6.2.1
    symbols:
      - name: dell.data_domain.diskSectorsRead
        OID: 1.3.6.1.4.1.19746.1.6.2.1.1.3
      - name: dell.data_domain.diskSectorsWritten
        OID: 1.3.6.1.4.1.19746.1.6.2.1.1.4
      - name: dell.data_domain.diskTotalKBytes
        OID: 1.3.6.1.4.1.19746.1.6.2.1.1.5
      - name: dell.data_domain.diskBusy
        OID: 1.3.6.1.4.1.19746.1.6.2.1.1.6
    metric_tags:
      - column:
          OID: 1.3.6.1.4.1.19746.1.6.2.1.1.7
          name: diskPerfState
        tag: dell_data_domain_disk_perf_state
        mapping:
          1: ok
          2: unknown
          3: absent
          4: failed
          5: spare
          6: available
      - column:
          OID: 1.3.6.1.4.1.19746.1.6.2.1.1.2
          name: diskPerfIndex
        tag: dell_data_domain_disk_perf_index
