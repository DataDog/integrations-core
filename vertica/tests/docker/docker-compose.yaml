services:
  vertica:
    pull_policy: build
    build:
      context: .
      dockerfile: ./Dockerfile_custom
      args:
        VERTICA_VERSION: ${VERTICA_VERSION}
    image: datadog/vertica-ce-custom:${VERTICA_VERSION}
    environment:
      APP_DB_PASSWORD: "monitor"
      VERTICA_MEMDEBUG: 2
      VERTICA_DB_NAME: "datadog"
      TZ: "UTC"
    container_name: vertica-ce
    ports:
      - "5433:5433"
      - "5444:5444"
    volumes:
      - type: volume
        source: vertica-data2
        target: /data

volumes:
  vertica-data2:
