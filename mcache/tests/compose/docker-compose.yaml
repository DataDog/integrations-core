version: '3.5'

services:
  memcached:
    image: datadog/docker-library:memcached_SASL
    environment:
      USERNAME: testuser
      PASSWORD: testpass
    ports:
      - "11211:11211"
    command: memcached -S

  memcached_socket:
    image: datadog/docker-library:memcached_SASL
    environment:
      USERNAME: testuser
      PASSWORD: testpass
    volumes:
    - ${UNIXSOCKET_DIR}:${DOCKER_SOCKET_DIR}
    command: memcached -S -s ${DOCKER_SOCKET_PATH} -vvv

#   memcached_socket:
#    build:
#      context: .
#      args:
#        memcache_uid: ${MEMCACHE_UID}
#        memcache_gid: ${MEMCACHE_GID}
#    environment:
#      USERNAME: testuser
#      PASSWORD: testpass
#    restart: always
#    volumes:
#    - ${UNIXSOCKET_DIR}:${DOCKER_SOCKET_DIR}
#    command: memcached -s ${DOCKER_SOCKET_PATH} -vvv
