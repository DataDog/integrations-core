name: Azure IoT Edge
files:
  - name: azure_iot_edge.yaml
    options:
      - template: init_config
        options:
          - template: init_config/default
      - template: instances
        options:
          - name: edge_hub_prometheus_url
            description: |
              The URL where Edge Hub metrics are exposed via Prometheus.
            value:
              type: string
              example: http://edgeHub:9600/metrics
          - name: edge_agent_prometheus_url
            description: |
              The URL where Edge Agent metrics are exposed via Prometheus.
            value:
              type: string
              example: http://edgeAgent:9600/metrics
          - name: security_daemon_management_api_url
            description: |
              The URL of the Security Daemon management API, for health check purposes.
            value:
              type: string
              example: http://localhost:15580
          - template: instances/default

      - template: logs
        example:
          # Requires setting DD_CONTAINER_INCLUDE_LOGS="name:<CONTAINER_1> name:<CONTAINER_2> ..."
          # See: https://docs.datadoghq.com/agent/guide/autodiscovery-management/?tab=containerizedagent#include-containers
          - type: docker
            source: azure_iot_edge
            service: "<SERVICE_NAME>"
