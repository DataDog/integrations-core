version: '3'

services:
  trafficserver:
    build:
      context: .
      args:
        - TRAFFIC_SERVER_VERSION=${TRAFFIC_SERVER_VERSION}
    container_name: dd-test-trafficserver
    tty: true
    entrypoint: ["/opt/ats/bin/traffic_manager"]
    command: ['--nosyslog', '--maxRecords', '3000']
    volumes:
     - ./plugin.config:/opt/ats/etc/trafficserver/plugin.config
     #- ./logging.yaml:/opt/ats/etc/trafficserver/logging.yaml
     #- ./records.config:/opt/ats/etc/trafficserver/records.config
    ports:
        - "8080:8080"
