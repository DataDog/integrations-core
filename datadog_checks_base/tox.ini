[tox]
minversion = 2.0
skip_missing_interpreters = true
envlist =
    py38

[testenv]
dd_check_style = true
usedevelop = true
deps =
    -e../datadog_checks_tests_helper
    -rrequirements-dev.txt
passenv =
    AGENT.JOBSTATUS
    AGENT_BUILDDIRECTORY
    AGENT_DISABLELOGPLUGIN_TESTFILEPUBLISHERPLUGIN
    AGENT_DISABLELOGPLUGIN_TESTRESULTLOGPLUGIN
    AGENT_HOMEDIRECTORY
    AGENT_ID
    AGENT_JOBNAME
    AGENT_JOBSTATUS
    AGENT_MACHINENAME
    AGENT_NAME
    AGENT_OS
    AGENT_OSARCHITECTURE
    AGENT_READONLYVARIABLES
    AGENT_RETAINDEFAULTENCODING
    AGENT_ROOTDIRECTORY
    AGENT_SERVEROMDIRECTORY
    AGENT_TEMPDIRECTORY
    AGENT_TOOLSDIRECTORY
    AGENT_VERSION
    AGENT_WORKFOLDER
    ALLUSERSPROFILE
    ANDROID_HOME
    ANDROID_NDK_HOME
    ANDROID_NDK_PATH
    ANT_HOME
    APPDATA
    AZURE_EXTENSION_DIR
    AZURE_HTTP_USER_AGENT
    BOOST_ROOT
    BOOST_ROOT_1_69_0
    BUILD_ARTIFACTSTAGINGDIRECTORY
    BUILD_BINARIESDIRECTORY
    BUILD_BUILDID
    BUILD_BUILDNUMBER
    BUILD_BUILDURI
    BUILD_CONTAINERID
    BUILD_DEFINITIONNAME
    BUILD_DEFINITIONVERSION
    BUILD_QUEUEDBY
    BUILD_QUEUEDBYID
    BUILD_REASON
    BUILD_REPOSITORY_CLEAN
    BUILD_REPOSITORY_GIT_SUBMODULECHECKOUT
    BUILD_REPOSITORY_ID
    BUILD_REPOSITORY_LOCALPATH
    BUILD_REPOSITORY_NAME
    BUILD_REPOSITORY_PROVIDER
    BUILD_REPOSITORY_URI
    BUILD_REQUESTEDFOR
    BUILD_REQUESTEDFORID
    BUILD_SOURCEBRANCH
    BUILD_SOURCEBRANCHNAME
    BUILD_SOURCESDIRECTORY
    BUILD_SOURCEVERSION
    BUILD_SOURCEVERSIONAUTHOR
    BUILD_SOURCEVERSIONMESSAGE
    BUILD_STAGINGDIRECTORY
    CHOCOLATEYINSTALL
    CHROMEWEBDRIVER
    COBERTURA_HOME
    CODECOV_TOKEN
    COMMONPROGRAMFILES
    COMMONPROGRAMFILES(X86)
    COMMONPROGRAMW6432
    COMMON_TESTRESULTSDIRECTORY
    COMPUTERNAME
    COMSPEC
    CONDA
    DDEV_COLOR
    DDEV_COV_MISSING
    DOCKER_USERNAME
    DRIVERDATA
    GCM_INTERACTIVE
    GECKOWEBDRIVER
    GIT_TERMINAL_PROMPT
    GOROOT
    GOROOT_1_10_X64
    GOROOT_1_11_X64
    GOROOT_1_12_X64
    GOROOT_1_13_X64
    GRADLE_HOME
    HOMEDRIVE
    HOMEPATH
    IEWEBDRIVER
    IMAGEVERSION
    JAVA_HOME
    JAVA_HOME_11_X64
    JAVA_HOME_7_X64
    JAVA_HOME_8_X64
    LOCALAPPDATA
    LOGONSERVER
    M2
    M2_HOME
    M2_REPO
    MAVEN_OPTS
    MONAGENTCLIENTLOCATION
    MSDEPLOY_HTTP_USER_AGENT
    NPM_CONFIG_CACHE
    NPM_CONFIG_PREFIX
    NUMBER_OF_PROCESSORS
    ORACLE_DOCKER_USERNAME
    OS
    PATH
    PATHEXT
    PHPROOT
    PIPELINE_WORKSPACE
    PROCESSOR_ARCHITECTURE
    PROCESSOR_IDENTIFIER
    PROCESSOR_LEVEL
    PROCESSOR_REVISION
    PROGRAMDATA
    PROGRAMFILES
    PROGRAMFILES(X86)
    PROGRAMW6432
    PROMPT
    PSEXECUTIONPOLICYPREFERENCE
    PSMODULEPATH
    PUBLIC
    PYTEST_ADDOPTS
    PYTHONHASHSEED
    PYTHON_HOME
    PY_COLORS
    RUNNER_TOOLSDIRECTORY
    SBT_HOME
    SELENIUM_JAR_PATH
    SYSTEM
    SYSTEMDRIVE
    SYSTEMROOT
    SYSTEM_ARTIFACTSDIRECTORY
    SYSTEM_COLLECTIONID
    SYSTEM_COLLECTIONURI
    SYSTEM_CULTURE
    SYSTEM_DEFAULTWORKINGDIRECTORY
    SYSTEM_DEFINITIONID
    SYSTEM_DEFINITIONNAME
    SYSTEM_ENABLEACCESSTOKEN
    SYSTEM_HOSTTYPE
    SYSTEM_ISSCHEDULED
    SYSTEM_JOBATTEMPT
    SYSTEM_JOBDISPLAYNAME
    SYSTEM_JOBID
    SYSTEM_JOBIDENTIFIER
    SYSTEM_JOBNAME
    SYSTEM_JOBPARALLELISMTAG
    SYSTEM_JOBPOSITIONINPHASE
    SYSTEM_PHASEATTEMPT
    SYSTEM_PHASEDISPLAYNAME
    SYSTEM_PHASEID
    SYSTEM_PHASENAME
    SYSTEM_PIPELINESTARTTIME
    SYSTEM_PLANID
    SYSTEM_PULLREQUEST_ISFORK
    SYSTEM_PULLREQUEST_PULLREQUESTID
    SYSTEM_PULLREQUEST_PULLREQUESTNUMBER
    SYSTEM_PULLREQUEST_SOURCEBRANCH
    SYSTEM_PULLREQUEST_SOURCECOMMITID
    SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI
    SYSTEM_PULLREQUEST_TARGETBRANCH
    SYSTEM_SERVERTYPE
    SYSTEM_STAGEATTEMPT
    SYSTEM_STAGEDISPLAYNAME
    SYSTEM_STAGEID
    SYSTEM_STAGENAME
    SYSTEM_TASKDEFINITIONSURI
    SYSTEM_TASKDISPLAYNAME
    SYSTEM_TASKINSTANCEID
    SYSTEM_TASKINSTANCENAME
    SYSTEM_TEAMFOUNDATIONCOLLECTIONURI
    SYSTEM_TEAMFOUNDATIONSERVERURI
    SYSTEM_TEAMPROJECT
    SYSTEM_TEAMPROJECTID
    SYSTEM_TIMELINEID
    SYSTEM_TOTALJOBSINPHASE
    SYSTEM_WORKFOLDER
    TASK_DISPLAYNAME
    TEMP
    TF_BUILD
    TMP
    TOX_ENV_DIR
    TOX_ENV_NAME
    TOX_PACKAGE
    TOX_TESTENV_PASSENV
    TOX_WORK_DIR
    USEPYTHONVERSION1_PYTHONLOCATION
    USEPYTHONVERSION2_PYTHONLOCATION
    USERDOMAIN
    USERDOMAIN_ROAMINGPROFILE
    USERNAME
    USERPROFILE
    VCPKG_INSTALLATION_ROOT
    VIRTUAL_ENV
    VS140COMNTOOLS
    VSTS_AGENT_PERFLOG
    VSTS_PROCESS_LOOKUP_ID
    WINDIR
    WIX
commands =
    pip install requests-kerberos==0.12.0
    pip install -r requirements.in
    pytest -v {posargs}
