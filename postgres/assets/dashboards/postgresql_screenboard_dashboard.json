{
  "title": "Postgres - Overview",
  "description": "This dashboard provides a high-level overview of your PostgreSQL databases, so you can track throughput, replication, locks, and other metrics from all your servers and spot potential issues. Further reading on PostgreSQL monitoring:\n\n- [Datadog's guide to key PostgreSQL metrics](https://www.datadoghq.com/blog/postgresql-monitoring/)\n\n- [Collecting metrics with PostgreSQL monitoring tools](https://www.datadoghq.com/blog/postgresql-monitoring-tools/)\n\n- [How to monitor PostgreSQL with Datadog](https://www.datadoghq.com/blog/collect-postgresql-data-with-datadog/)\n\n- [Datadog's PostgreSQL integration docs](https://docs.datadoghq.com/integrations/postgres/)\n\nClone this template dashboard to make changes and add your own graph widgets.",
  "widgets": [
    {
      "id": 8450562588885112,
      "definition": {
        "title": "About Postgres",
        "title_align": "center",
        "type": "group",
        "banner_img": "/static/images/integration_dashboard/postgres_hero_2.jpg",
        "show_title": false,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2247473858319746,
            "definition": {
              "type": "note",
              "content": "\nThis dashboard provides a high-level overview of your PostgreSQL databases, so you can track throughput, replication, locks, and other metrics from all your servers and spot potential issues. \n\n",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 6131621647457690,
            "definition": {
              "type": "note",
              "content": "\n**Further reading on PostgreSQL monitoring**\n\n- [Datadog's guide to key PostgreSQL metrics](https://www.datadoghq.com/blog/postgresql-monitoring/)\n\n- [Collecting metrics with PostgreSQL monitoring tools](https://www.datadoghq.com/blog/postgresql-monitoring-tools/)\n\n- [How to monitor PostgreSQL with Datadog](https://www.datadoghq.com/blog/collect-postgresql-data-with-datadog/)\n\n- [Datadog's PostgreSQL integration docs](https://docs.datadoghq.com/integrations/postgres/)",
              "background_color": "transparent",
              "font_size": "14",
              "text_align": "left",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "left"
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 8,
        "height": 5
      }
    },
    {
      "id": 7975775563990214,
      "definition": {
        "title": "Current Activity",
        "type": "group",
        "background_color": "white",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8300711807334560,
            "definition": {
              "title": "Max connections in use",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "q": "max:postgresql.percent_usage_connections{$scope,$host}*100",
                  "aggregator": "last",
                  "conditional_formats": [
                    {
                      "comparator": ">",
                      "palette": "white_on_red",
                      "value": 75
                    },
                    {
                      "comparator": ">",
                      "palette": "white_on_yellow",
                      "value": 50
                    },
                    {
                      "comparator": "<=",
                      "palette": "white_on_green",
                      "value": 50
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "text_align": "center",
              "precision": 0
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 2633722480504268,
            "definition": {
              "title": "Rows fetched / returned",
              "title_size": "16",
              "title_align": "left",
              "type": "query_value",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1 / (query1 + query2) * 100"
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:postgresql.rows_fetched{$scope,$host}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    },
                    {
                      "query": "sum:postgresql.rows_returned{$scope,$host}",
                      "data_source": "metrics",
                      "name": "query2",
                      "aggregator": "avg"
                    }
                  ]
                }
              ],
              "autoscale": true,
              "custom_unit": "%",
              "precision": 1
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      },
      "layout": {
        "x": 8,
        "y": 0,
        "width": 4,
        "height": 5
      }
    },
    {
      "id": 2888659938423792,
      "definition": {
        "title": "Resource Utilization",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_blue",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 4243914035569716,
            "definition": {
              "title": "Dead rows",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Dead rows"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:postgresql.dead_rows{$scope,$db,$table,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "grey"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 8205880511151828,
            "definition": {
              "title": "Resources by table",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "aggregator": "avg",
                  "cell_display_mode": ["bar"],
                  "q": "avg:postgresql.total_size{$scope,$db,$table,$host} by {table}",
                  "alias": "Disk Usage",
                  "limit": 50,
                  "order": "desc"
                },
                {
                  "q": "avg:postgresql.index_scans{$scope,$db,$table,$host} by {table}",
                  "alias": "Index Scans",
                  "cell_display_mode": ["bar"],
                  "aggregator": "avg"
                },
                {
                  "q": "avg:postgresql.live_rows{$scope,$db,$table,$host} by {table}",
                  "alias": "Live Rows",
                  "cell_display_mode": ["bar"],
                  "aggregator": "avg"
                },
                {
                  "q": "avg:postgresql.dead_rows{$scope,$db,$table,$host} by {table}",
                  "alias": "Dead Rows",
                  "cell_display_mode": ["bar"],
                  "aggregator": "avg"
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 5,
              "y": 0,
              "width": 7,
              "height": 4
            }
          },
          {
            "id": 4074635349618514,
            "definition": {
              "title": "Temp bytes",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Temp bytes"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:postgresql.temp_bytes{$scope,$db,$table,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 5,
              "height": 2
            }
          },
          {
            "id": 3455888496260404,
            "definition": {
              "title": "Most frequently scanned indexes",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 5,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:postgresql.index_scans{$scope,$db,$host} by {index}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 0,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 2446150695357200,
            "definition": {
              "title": "Least frequently scanned indexes",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 5,
                        "order": "asc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:postgresql.index_scans{$scope,$db,$host} by {index}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 3,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 1804222491021348,
            "definition": {
              "title": "Tables with most disk usage (top 5)",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 5,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:postgresql.total_size{$scope,$table,$host} by {table}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 4,
              "width": 3,
              "height": 3
            }
          },
          {
            "id": 1541414885015292,
            "definition": {
              "title": "Tables with most live rows",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 5,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:postgresql.live_rows{$scope,$table,$host} by {table}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 9,
              "y": 4,
              "width": 3,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 3404772226023224,
      "definition": {
        "title": "Locks",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_orange",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 5279028267799090,
            "definition": {
              "title": "Locks by lock mode",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "top(query1, 5, 'mean', 'desc')",
                      "alias": "Lock Count"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:postgresql.locks{$scope,$host} by {lock_mode,table}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 7502615221382420,
            "definition": {
              "title": "Locks by lock mode",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "sum:postgresql.locks{$scope,$host} by {lock_mode,table}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "max"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 3
            }
          },
          {
            "id": 7487114663198344,
            "definition": {
              "title": "Deadlocks count",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "alias": "Deadlocks",
                      "formula": "query1"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "max:postgresql.deadlocks.count{$scope,$host} by {db}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "include_zero": true,
                "scale": "linear",
                "label": "",
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 8,
              "y": 0,
              "width": 4,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 2399955077694968,
      "definition": {
        "title": "Rows",
        "type": "group",
        "background_color": "vivid_purple",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3906600369706580,
            "definition": {
              "title": "Inserted",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query3",
                      "alias": "Inserted Rows"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:postgresql.rows_inserted{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query3"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 7149220964544692,
            "definition": {
              "title": "Updated",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Updated Rows"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:postgresql.rows_updated{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 0,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 7182284193407168,
            "definition": {
              "title": "Actions",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "aggregator": "sum",
                  "cell_display_mode": ["bar"],
                  "q": "avg:postgresql.rows_inserted{$db,$scope,$host} by {db}",
                  "alias": "Inserted",
                  "limit": 50,
                  "order": "desc"
                },
                {
                  "q": "avg:postgresql.rows_updated{$db,$scope,$host} by {db}",
                  "alias": "Updated",
                  "cell_display_mode": ["bar"],
                  "aggregator": "sum"
                },
                {
                  "q": "avg:postgresql.rows_deleted{$db,$scope,$host} by {db}",
                  "alias": "Deleted",
                  "cell_display_mode": ["bar"],
                  "aggregator": "sum"
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 8,
              "y": 0,
              "width": 4,
              "height": 4
            }
          },
          {
            "id": 1990358978286900,
            "definition": {
              "title": "Deleted",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query2",
                      "alias": "Deleted Rows"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:postgresql.rows_deleted{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 2,
              "width": 4,
              "height": 2
            }
          },
          {
            "id": 51205630932036,
            "definition": {
              "title": "Heap-only updates ",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Hot updated rows"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "avg:postgresql.rows_hot_updated{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 4,
              "y": 2,
              "width": 4,
              "height": 2
            }
          }
        ]
      }
    },
    {
      "id": 1113650335908058,
      "definition": {
        "title": "Connections Monitor",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_pink",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2360245042300150,
            "definition": {
              "title": "Connections per database",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Active connections "
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:postgresql.connections{$scope,$db,$host} by {db}.rollup(max)",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "cool"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Max connections allowed"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "min:postgresql.max_connections{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "warm"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 7,
              "height": 3
            }
          },
          {
            "id": 2702068970439250,
            "definition": {
              "title": "Most connected databases",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "max:postgresql.connections{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 7,
              "y": 0,
              "width": 5,
              "height": 4
            }
          },
          {
            "id": 3286749819274530,
            "definition": {
              "type": "note",
              "content": "A PostgreSQL database cluster is not a collection of servers, but a collection of databases managed by a single server.",
              "background_color": "transparent",
              "font_size": "16",
              "text_align": "left",
              "vertical_align": "top",
              "show_tick": false,
              "tick_pos": "50%",
              "tick_edge": "top",
              "has_padding": false
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 7,
              "height": 1
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 22,
        "width": 12,
        "height": 5,
        "is_column_break": true
      }
    },
    {
      "id": 1487264123152382,
      "definition": {
        "title": "Throughput",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_green",
        "show_title": true,
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 3403862571191142,
            "definition": {
              "title": "Sequential scans vs index scans",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Index Scans"
                    },
                    {
                      "formula": "query2",
                      "alias": "Sequential Scans"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "avg:postgresql.index_scans{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "avg:postgresql.seq_scans{$scope,$db,$host} by {db}",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "green"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 1998962873985110,
            "definition": {
              "title": "Top table scans",
              "title_size": "16",
              "title_align": "left",
              "type": "query_table",
              "requests": [
                {
                  "aggregator": "avg",
                  "cell_display_mode": ["bar"],
                  "q": "avg:postgresql.index_scans{$scope,$db,$table,$host} by {db}",
                  "alias": "Index Scans",
                  "limit": 50,
                  "order": "desc"
                },
                {
                  "q": "avg:postgresql.seq_scans{$scope,$db,$table,$host} by {db}",
                  "alias": "Sequential Scans",
                  "cell_display_mode": ["bar"],
                  "aggregator": "avg"
                }
              ],
              "has_search_bar": "auto"
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 7413284956808278,
            "definition": {
              "title": "Sequential scans vs. week before",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "horizontal",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Current"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:postgresql.seq_scans{$scope,$db,$table,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "green"
                  },
                  "display_type": "line"
                },
                {
                  "formulas": [
                    {
                      "formula": "week_before(query1)",
                      "alias": "Previous Week"
                    }
                  ],
                  "response_format": "timeseries",
                  "on_right_yaxis": false,
                  "queries": [
                    {
                      "query": "sum:postgresql.seq_scans{$scope,$db,$table,$host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "grey",
                    "line_type": "dashed"
                  },
                  "display_type": "line"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 3,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 1887563582446124,
            "definition": {
              "title": "Top function calls",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "avg:postgresql.function.calls{$scope,$db,$table,$host} by {function}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 3,
              "width": 6,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 2160806546189426,
      "definition": {
        "title": "Replication",
        "title_align": "center",
        "type": "group",
        "background_color": "vivid_orange",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 1609850131661798,
            "definition": {
              "title": "Number of hosts with replication delay",
              "title_size": "16",
              "title_align": "left",
              "show_legend": false,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "count_nonzero(query1)",
                      "alias": "Hosts with replication delay"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:postgresql.replication_delay_bytes{$scope,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "orange"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 3
            }
          },
          {
            "id": 3885088604074464,
            "definition": {
              "title": "Max replication delay",
              "title_size": "16",
              "title_align": "left",
              "type": "toplist",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "limit": {
                        "count": 10,
                        "order": "desc"
                      }
                    }
                  ],
                  "response_format": "scalar",
                  "queries": [
                    {
                      "query": "max:postgresql.replication_delay{$scope,$host} by {host}",
                      "data_source": "metrics",
                      "name": "query1",
                      "aggregator": "avg"
                    }
                  ]
                }
              ]
            },
            "layout": {
              "x": 6,
              "y": 0,
              "width": 6,
              "height": 3
            }
          }
        ]
      }
    },
    {
      "id": 4453639639662026,
      "definition": {
        "title": "Checkpoints",
        "title_align": "center",
        "type": "group",
        "background_color": "blue",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 2628267937704802,
            "definition": {
              "title": "Scheduled vs requested checkpoints",
              "title_size": "16",
              "title_align": "left",
              "show_legend": true,
              "legend_layout": "auto",
              "legend_columns": ["avg", "min", "max", "value", "sum"],
              "type": "timeseries",
              "requests": [
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Scheduled checkpoints performed"
                    },
                    {
                      "formula": "query2",
                      "alias": "Requested checkpoints performed"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:postgresql.bgwriter.checkpoints_timed{$scope,$db,$host}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    },
                    {
                      "query": "sum:postgresql.bgwriter.checkpoints_requested{$scope,$db,$host}.as_count()",
                      "data_source": "metrics",
                      "name": "query2"
                    }
                  ],
                  "style": {
                    "palette": "purple"
                  },
                  "display_type": "bars"
                },
                {
                  "formulas": [
                    {
                      "formula": "query1",
                      "alias": "Requested checkpoints performed"
                    }
                  ],
                  "response_format": "timeseries",
                  "queries": [
                    {
                      "query": "sum:postgresql.bgwriter.checkpoints_requested{$scope,$db,$host}.as_count()",
                      "data_source": "metrics",
                      "name": "query1"
                    }
                  ],
                  "style": {
                    "palette": "orange"
                  },
                  "display_type": "bars"
                }
              ],
              "yaxis": {
                "scale": "linear",
                "label": "",
                "include_zero": true,
                "min": "auto",
                "max": "auto"
              },
              "markers": []
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 6,
        "height": 5
      }
    },
    {
      "id": 1127561260333130,
      "definition": {
        "title": "Logs",
        "title_align": "center",
        "type": "group",
        "background_color": "blue",
        "layout_type": "ordered",
        "widgets": [
          {
            "id": 8685226852632656,
            "definition": {
              "title": "",
              "title_size": "16",
              "title_align": "left",
              "type": "log_stream",
              "indexes": [],
              "query": "source:postgresql",
              "sort": {
                "column": "time",
                "order": "desc"
              },
              "columns": ["core_host", "core_service"],
              "show_date_column": true,
              "show_message_column": true,
              "message_display": "expanded-md"
            },
            "layout": {
              "x": 0,
              "y": 0,
              "width": 6,
              "height": 4
            }
          }
        ]
      },
      "layout": {
        "x": 6,
        "y": 0,
        "width": 6,
        "height": 5
      }
    }
  ],
  "template_variables": [
    {
      "name": "scope",
      "default": "*",
      "prefix": null
    },
    {
      "name": "table",
      "default": "*",
      "prefix": "table"
    },
    {
      "name": "db",
      "default": "*",
      "prefix": "db"
    },
    {
      "name": "host",
      "default": "*",
      "prefix": "host"
    }
  ],
  "layout_type": "ordered",
  "is_read_only": true,
  "notify_list": [],
  "reflow_type": "fixed"
}
